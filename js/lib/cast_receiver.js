// Copyright Google Inc. All Rights Reserved.
(function(){'use strict';var h,k=function(a,b){function c(){}c.prototype=b.prototype;a.Sa=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]},aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:
this,ca=function(){ca=function(){};ba.Symbol||(ba.Symbol=da)},ea=0,da=function(a){return"jscomp_symbol_"+(a||"")+ea++},ga=function(){ca();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return fa(this)}});ga=function(){}},fa=function(a){var b=0;return ha(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},ha=function(a){ga();a={next:a};a[ba.Symbol.iterator]=
function(){return this};return a},l=function(a){ga();var b=a[Symbol.iterator];return b?b.call(a):fa(a)},m=this,n=function(a){return void 0!==a},ia=function(a){return"string"==typeof a},p=function(a){return"number"==typeof a},ja=function(){},ka=function(a){a.Ab=void 0;a.ea=function(){return a.Ab?a.Ab:a.Ab=new a}},la=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";
if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ma=function(a){var b=la(a);return"array"==b||"object"==b&&"number"==typeof a.length},q=
function(a){return"function"==la(a)},na=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},oa=function(a,b,c){return a.call.apply(a.bind,arguments)},pa=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},t=function(a,b,c){t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?
oa:pa;return t.apply(null,arguments)},qa=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}},ra=Date.now||function(){return+new Date},u=function(a,b){a=a.split(".");var c=m;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}},sa=function(a,b){function c(){}c.prototype=b.prototype;a.Sa=b.prototype;a.prototype=
new c;a.prototype.constructor=a;a.gf=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var cast=m.cast||{};u("cast.receiver.VERSION","2.0.0");var ta=function(a,b){a=a.toLowerCase();b=b.toLowerCase();return 0==a.indexOf(b)||0==b.indexOf(a)};var ua=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ua);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};sa(ua,Error);ua.prototype.name="CustomError";var va;var wa=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},xa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ya=function(a,b){a=String(a).toLowerCase();b=String(b).toLowerCase();return a<b?-1:a==b?0:1},za=function(a,b){return a<b?-1:a>b?1:0};var Aa=function(a,b){b.unshift(a);ua.call(this,wa.apply(null,b));b.shift()};sa(Aa,ua);Aa.prototype.name="AssertionError";
var Ba=function(a,b,c,d){var e="Assertion failed";if(c){e+=": "+c;var f=d}else a&&(e+=": "+a,f=b);throw new Aa(""+e,f||[]);},v=function(a,b,c){a||Ba("",null,b,Array.prototype.slice.call(arguments,2))},Ca=function(a,b){throw new Aa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));},Da=function(a,b,c){p(a)||Ba("Expected number but got %s: %s.",[la(a),a],b,Array.prototype.slice.call(arguments,2));return a},Ea=function(a,b,c){q(a)||Ba("Expected function but got %s: %s.",[la(a),a],b,Array.prototype.slice.call(arguments,
2))};var Fa=Array.prototype.indexOf?function(a,b,c){v(null!=a.length);return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ga=Array.prototype.lastIndexOf?function(a,b,c){v(null!=a.length);return Array.prototype.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(ia(a))return ia(b)&&
1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;return-1},Ha=Array.prototype.forEach?function(a,b,c){v(null!=a.length);Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ia=Array.prototype.filter?function(a,b,c){v(null!=a.length);return Array.prototype.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=ia(a)?a.split(""):a,r=0;r<d;r++)if(r in g){var H=g[r];b.call(c,H,r,a)&&
(e[f++]=H)}return e},Ka=function(a,b){b=Fa(a,b);var c;(c=0<=b)&&Ja(a,b);return c},Ja=function(a,b){v(null!=a.length);Array.prototype.splice.call(a,b,1)},La=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]},Na=function(a,b,c,d){v(null!=a.length);return Array.prototype.splice.apply(a,Ma(arguments,1))},Ma=function(a,b,c){v(null!=a.length);return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)};var Oa;a:{var Pa=m.navigator;if(Pa){var Qa=Pa.userAgent;if(Qa){Oa=Qa;break a}}Oa=""}var w=function(a){return-1!=Oa.indexOf(a)};var Ra=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)},Sa=function(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1},Ta=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b},Ua=function(a,b){return null!==a&&b in a},Va=function(a){var b={},c;for(c in a)b[c]=a[c];return b},Wa=function(a){var b=la(a);if("object"==b||"array"==b){if(q(a.clone))return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=Wa(a[c]);return b}return a},Xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),
Ya=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Xa.length;f++)c=Xa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Za=function(a){Za[" "](a);return a};Za[" "]=ja;var ab=function(a,b){var c=$a;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var bb=w("Opera"),cb=w("Trident")||w("MSIE"),db=w("Edge"),eb=w("Gecko")&&!(-1!=Oa.toLowerCase().indexOf("webkit")&&!w("Edge"))&&!(w("Trident")||w("MSIE"))&&!w("Edge"),fb=-1!=Oa.toLowerCase().indexOf("webkit")&&!w("Edge"),gb=function(){var a=m.document;return a?a.documentMode:void 0},hb;
a:{var ib="",jb=function(){var a=Oa;if(eb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(db)return/Edge\/([\d\.]+)/.exec(a);if(cb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(fb)return/WebKit\/(\S+)/.exec(a);if(bb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();jb&&(ib=jb?jb[1]:"");if(cb){var kb=gb();if(null!=kb&&kb>parseFloat(ib)){hb=String(kb);break a}}hb=ib}
var lb=hb,$a={},mb=function(a){return ab(a,function(){for(var b=0,c=xa(String(lb)).split("."),d=xa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",r=d[f]||"";do{g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""];if(0==g[0].length&&0==r[0].length)break;b=za(0==g[1].length?0:parseInt(g[1],10),0==r[1].length?0:parseInt(r[1],10))||za(0==g[2].length,0==r[2].length)||za(g[2],r[2]);g=g[3];r=r[3]}while(0==b)}return 0<=b})},nb;var ob=m.document;
nb=ob&&cb?gb()||("CSS1Compat"==ob.compatMode?parseInt(lb,10):5):void 0;var pb=function(a,b,c,d,e){this.reset(a,b,c,d,e)};pb.prototype.kb=0;pb.prototype.$b=null;var qb=0;pb.prototype.reset=function(a,b,c,d,e){this.kb="number"==typeof e?e:qb++;this.pd=d||ra();this.sa=a;this.Mc=b;this.Ic=c;delete this.$b};pb.prototype.vc=function(a){this.sa=a};var rb=function(a){this.Nc=a;this.$a=this.Ub=this.sa=this.J=null},x=function(a,b){this.name=a;this.value=b};x.prototype.toString=function(){return this.name};
var sb=new x("SHOUT",1200),tb=new x("SEVERE",1E3),ub=new x("WARNING",900),vb=new x("INFO",800),wb=new x("CONFIG",700),xb=new x("FINE",500),y=new x("FINER",400),yb=[new x("OFF",Infinity),sb,tb,ub,vb,wb,xb,y,new x("FINEST",300),new x("ALL",0)],zb=null,Ab=function(a){if(!zb){zb={};for(var b=0,c;c=yb[b];b++)zb[c.value]=c,zb[c.name]=c}if(a in zb)return zb[a];for(b=0;b<yb.length;++b)if(c=yb[b],c.value<=a)return c;return null};rb.prototype.getName=function(){return this.Nc};rb.prototype.getParent=function(){return this.J};
rb.prototype.Bc=function(){this.Ub||(this.Ub={});return this.Ub};rb.prototype.vc=function(a){this.sa=a};var Bb=function(a){if(a.sa)return a.sa;if(a.J)return Bb(a.J);Ca("Root logger has no level set.");return null};
rb.prototype.log=function(a,b,c){if(a.value>=Bb(this).value)for(q(b)&&(b=b()),a=new pb(a,String(b),this.Nc),c&&(a.$b=c),c="log:"+a.Mc,m.console&&(m.console.timeStamp?m.console.timeStamp(c):m.console.markTimeline&&m.console.markTimeline(c)),m.msWriteProfilerMark&&m.msWriteProfilerMark(c),c=this;c;){var d=c,e=a;if(d.$a)for(var f=0;b=d.$a[f];f++)b(e);c=c.getParent()}};rb.prototype.info=function(a,b){this.log(vb,a,b)};
var Cb={},Db=null,Eb=function(){Db||(Db=new rb(""),Cb[""]=Db,Db.vc(wb))},z=function(a){Eb();var b;if(!(b=Cb[a])){b=new rb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=z(a.substr(0,c));c.Bc()[d]=b;b.J=c;Cb[a]=b}return b};var A=function(a,b,c){a&&a.log(b,c,void 0)},B=function(a,b){a&&a.log(tb,b,void 0)},C=function(a,b){a&&a.log(ub,b,void 0)},E=function(a,b){a&&a.info(b,void 0)},Fb=function(a,b){a&&a.log(xb,b,void 0)};var F=function(){this.Ua=this.Ua;this.va=this.va};F.prototype.Ua=!1;F.prototype.M=function(){this.Ua||(this.Ua=!0,this.D())};var Gb=function(a,b){a.Ua?n(void 0)?b.call(void 0):b():(a.va||(a.va=[]),a.va.push(n(void 0)?t(b,void 0):b))};F.prototype.D=function(){if(this.va)for(;this.va.length;)this.va.shift()()};var Hb=function(a){a&&"function"==typeof a.M&&a.M()};var G=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.za=!1;this.bd=!0};G.prototype.stopPropagation=function(){this.za=!0};G.prototype.preventDefault=function(){this.defaultPrevented=!0;this.bd=!1};var Ib=!cb||9<=Number(nb),Jb=cb&&!mb("9");!fb||mb("528");eb&&mb("1.9b")||cb&&mb("8")||bb&&mb("9.5")||fb&&mb("528");eb&&!mb("8")||cb&&mb("9");var Kb=function(a,b){G.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Ia=this.state=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(eb){a:{try{Za(b.nodeName);var e=!0;
break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.offsetX=fb||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=fb||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=
d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Ia=a;a.defaultPrevented&&this.preventDefault()}};sa(Kb,G);Kb.prototype.stopPropagation=function(){Kb.Sa.stopPropagation.call(this);this.Ia.stopPropagation?this.Ia.stopPropagation():this.Ia.cancelBubble=!0};
Kb.prototype.preventDefault=function(){Kb.Sa.preventDefault.call(this);var a=this.Ia;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Jb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Lb="closure_listenable_"+(1E6*Math.random()|0),Mb=function(a){return!(!a||!a[Lb])},Nb=0;var Ob=function(a,b,c,d,e){this.listener=a;this.Kb=null;this.src=b;this.type=c;this.capture=!!d;this.yb=e;this.key=++Nb;this.Qa=this.sb=!1},Pb=function(a){a.Qa=!0;a.listener=null;a.Kb=null;a.src=null;a.yb=null};var Qb=function(a){this.src=a;this.A={};this.lb=0};Qb.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.A[f];a||(a=this.A[f]=[],this.lb++);var g=Rb(a,b,d,e);-1<g?(b=a[g],c||(b.sb=!1)):(b=new Ob(b,this.src,f,!!d,e),b.sb=c,a.push(b));return b};Qb.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.A))return!1;var e=this.A[a];b=Rb(e,b,c,d);return-1<b?(Pb(e[b]),Ja(e,b),0==e.length&&(delete this.A[a],this.lb--),!0):!1};
var Sb=function(a,b){var c=b.type;c in a.A&&Ka(a.A[c],b)&&(Pb(b),0==a.A[c].length&&(delete a.A[c],a.lb--))};Qb.prototype.tc=function(a){a=a&&a.toString();var b=0,c;for(c in this.A)if(!a||c==a){for(var d=this.A[c],e=0;e<d.length;e++)++b,Pb(d[e]);delete this.A[c];this.lb--}return b};Qb.prototype.Ya=function(a,b,c,d){a=this.A[a.toString()];var e=-1;a&&(e=Rb(a,b,c,d));return-1<e?a[e]:null};
Qb.prototype.hasListener=function(a,b){var c=n(a),d=c?a.toString():"",e=n(b);return Sa(this.A,function(a){for(var f=0;f<a.length;++f)if(!(c&&a[f].type!=d||e&&a[f].capture!=b))return!0;return!1})};var Rb=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.Qa&&f.listener==b&&f.capture==!!c&&f.yb==d)return e}return-1};var Tb="closure_lm_"+(1E6*Math.random()|0),Ub={},Vb=0,I=function(a,b,c,d,e){if("array"==la(b)){for(var f=0;f<b.length;f++)I(a,b[f],c,d,e);return null}c=Wb(c);if(Mb(a))a=a.Na(b,c,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=Xb(a);g||(a[Tb]=g=new Qb(a));c=g.add(b,c,!1,d,e);if(!c.Kb){d=Yb();c.Kb=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,f);else if(a.attachEvent)a.attachEvent(Zb(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");
Vb++}a=c}return a},Yb=function(){var a=$b,b=Ib?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},J=function(a,b,c,d,e){if("array"==la(b))for(var f=0;f<b.length;f++)J(a,b[f],c,d,e);else c=Wb(c),Mb(a)?a.mb(b,c,d,e):a&&(a=Xb(a))&&(b=a.Ya(b,c,!!d,e))&&ac(b)},ac=function(a){if(!p(a)&&a&&!a.Qa){var b=a.src;if(Mb(b))Sb(b.U,a);else{var c=a.type,d=a.Kb;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(Zb(c),
d);Vb--;(c=Xb(b))?(Sb(c,a),0==c.lb&&(c.src=null,b[Tb]=null)):Pb(a)}}},Zb=function(a){return a in Ub?Ub[a]:Ub[a]="on"+a},cc=function(a,b,c,d){var e=!0;if(a=Xb(a))if(b=a.A[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.Qa&&(f=bc(f,d),e=e&&!1!==f)}return e},bc=function(a,b){var c=a.listener,d=a.yb||a.src;a.sb&&ac(a);return c.call(d,b)},dc=function(a,b){v(Mb(a),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return a.dispatchEvent(b)},
$b=function(a,b){if(a.Qa)return!0;if(!Ib){if(!b)a:{b=["window","event"];for(var c=m,d;d=b.shift();)if(null!=c[d])c=c[d];else{b=null;break a}b=c}d=b;b=new Kb(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);for(var e=a.type,f=d.length-1;!b.za&&0<=f;f--)b.currentTarget=d[f],a=cc(d[f],e,!0,b),c=c&&a;for(f=0;!b.za&&f<d.length;f++)b.currentTarget=
d[f],a=cc(d[f],e,!1,b),c=c&&a}return c}return bc(a,new Kb(b,this))},Xb=function(a){a=a[Tb];return a instanceof Qb?a:null},ec="__closure_events_fn_"+(1E9*Math.random()>>>0),Wb=function(a){v(a,"Listener can not be null.");if(q(a))return a;v(a.handleEvent,"An object listener must have handleEvent method.");a[ec]||(a[ec]=function(b){return a.handleEvent(b)});return a[ec]};var K=function(){F.call(this);this.U=new Qb(this);this.td=this;this.sc=null};sa(K,F);K.prototype[Lb]=!0;h=K.prototype;h.addEventListener=function(a,b,c,d){I(this,a,b,c,d)};h.removeEventListener=function(a,b,c,d){J(this,a,b,c,d)};
h.dispatchEvent=function(a){fc(this);var b=this.sc;if(b){var c=[];for(var d=1;b;b=b.sc)c.push(b),v(1E3>++d,"infinite loop")}b=this.td;d=a.type||a;if(ia(a))a=new G(a,b);else if(a instanceof G)a.target=a.target||b;else{var e=a;a=new G(d,b);Ya(a,e)}var e=!0;if(c)for(var f=c.length-1;!a.za&&0<=f;f--){var g=a.currentTarget=c[f];e=gc(g,d,!0,a)&&e}a.za||(g=a.currentTarget=b,e=gc(g,d,!0,a)&&e,a.za||(e=gc(g,d,!1,a)&&e));if(c)for(f=0;!a.za&&f<c.length;f++)g=a.currentTarget=c[f],e=gc(g,d,!1,a)&&e;return e};
h.D=function(){K.Sa.D.call(this);this.U&&this.U.tc(void 0);this.sc=null};h.Na=function(a,b,c,d){fc(this);return this.U.add(String(a),b,!1,c,d)};h.mb=function(a,b,c,d){return this.U.remove(String(a),b,c,d)};var gc=function(a,b,c,d){b=a.U.A[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.Qa&&g.capture==c){var r=g.listener,H=g.yb||g.src;g.sb&&Sb(a.U,g);e=!1!==r.call(H,d)&&e}}return e&&0!=d.bd};
K.prototype.Ya=function(a,b,c,d){return this.U.Ya(String(a),b,c,d)};K.prototype.hasListener=function(a,b){return this.U.hasListener(n(a)?String(a):void 0,b)};var fc=function(a){v(a.U,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};var L=function(a,b){this.Ca=b;this.gc=!0;this.Ha=a;this.onClose=this.onMessage=null;this.h=new K;this.Ha.addEventListener(this.Ca,this.Ib.bind(this))};u("cast.receiver.CastChannel",L);L.prototype.da=function(){return"CastChannel["+this.Ca+" "+this.Ha.pa()+"]"};L.prototype.pa=function(){return this.Ha.pa()};L.prototype.getNamespace=L.prototype.pa;L.prototype.oe=function(){return this.Ca};L.prototype.getSenderId=L.prototype.oe;
L.prototype.Ib=function(a){A(hc,y,"Dispatching CastChannel message ["+this.Ha.pa()+", "+this.Ca+"]: "+a.data);a=new ic("message",a.data);if(this.onMessage)this.onMessage(a);this.f(a)};L.prototype.close=function(){if(this.gc){this.gc=!1;E(hc,"Closing CastChannel ["+this.Ha.pa()+", "+this.Ca+"]");var a=new ic("close",this.Ca);if(this.onClose)this.onClose(a);this.f(a);this.h.M();A(hc,y,"Disposed "+this.da())}};
L.prototype.send=function(a){if(!this.gc)throw Error("Invalid state, socket not open");this.Ha.send(this.Ca,a)};L.prototype.send=L.prototype.send;L.prototype.addEventListener=function(a,b){I(this.h,a,b)};L.prototype.addEventListener=L.prototype.addEventListener;L.prototype.removeEventListener=function(a,b){J(this.h,a,b)};L.prototype.removeEventListener=L.prototype.removeEventListener;L.prototype.f=function(a){a.target=this;return dc(this.h,a)};L.prototype.dispatchEvent=function(a){return this.f(a)};
L.prototype.dispatchEvent=L.prototype.dispatchEvent;L.EventType={MESSAGE:"message",CLOSE:"close"};var ic=function(a,b){G.call(this,a);this.message=b};k(ic,G);L.Event=ic;var hc=z("cast.receiver.CastChannel");var jc=function(a,b,c){this.ve=c;this.yd=a;this.He=b;this.Gb=0;this.zb=null};jc.prototype.get=function(){if(0<this.Gb){this.Gb--;var a=this.zb;this.zb=a.next;a.next=null}else a=this.yd();return a};jc.prototype.put=function(a){this.He(a);this.Gb<this.ve&&(this.Gb++,a.next=this.zb,this.zb=a)};var kc=function(a){m.setTimeout(function(){throw a;},0)},lc,mc=function(){var a=m.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!w("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,
a=t(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!w("Trident")&&!w("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.yc;c.yc=null;a()}};return function(a){d.next={yc:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?
function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){m.setTimeout(a,0)}};var nc=function(){this.Pb=this.Fa=null},pc=new jc(function(){return new oc},function(a){a.reset()},100);nc.prototype.add=function(a,b){var c=pc.get();c.set(a,b);this.Pb?this.Pb.next=c:(v(!this.Fa),this.Fa=c);this.Pb=c};nc.prototype.remove=function(){var a=null;this.Fa&&(a=this.Fa,this.Fa=this.Fa.next,this.Fa||(this.Pb=null),a.next=null);return a};var oc=function(){this.next=this.scope=this.bc=null};oc.prototype.set=function(a,b){this.bc=a;this.scope=b;this.next=null};
oc.prototype.reset=function(){this.next=this.scope=this.bc=null};var uc=function(a,b){qc||rc();sc||(qc(),sc=!0);tc.add(a,b)},qc,rc=function(){if(-1!=String(m.Promise).indexOf("[native code]")){var a=m.Promise.resolve(void 0);qc=function(){a.then(vc)}}else qc=function(){var a=vc;!q(m.setImmediate)||m.Window&&m.Window.prototype&&!w("Edge")&&m.Window.prototype.setImmediate==m.setImmediate?(lc||(lc=mc()),lc(a)):m.setImmediate(a)}},sc=!1,tc=new nc,vc=function(){for(var a;a=tc.remove();){try{a.bc.call(a.scope)}catch(b){kc(b)}pc.put(a)}sc=!1};var M=function(a,b){this.G=0;this.$c=void 0;this.Ga=this.$=this.J=null;this.xb=this.ac=!1;if(a!=ja)try{var c=this;a.call(b,function(a){wc(c,2,a)},function(a){if(!(a instanceof xc))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(e){}wc(c,3,a)})}catch(d){wc(this,3,d)}},yc=function(){this.next=this.context=this.Oa=this.wa=this.ma=null;this.rb=!1};yc.prototype.reset=function(){this.context=this.Oa=this.wa=this.ma=null;this.rb=!1};
var zc=new jc(function(){return new yc},function(a){a.reset()},100),Ac=function(a,b,c){var d=zc.get();d.wa=a;d.Oa=b;d.context=c;return d},Bc=function(a){if(a instanceof M)return a;var b=new M(ja);wc(b,2,a);return b};M.prototype.then=function(a,b,c){null!=a&&Ea(a,"opt_onFulfilled should be a function.");null!=b&&Ea(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return Cc(this,q(a)?a:null,q(b)?b:null,c)};M.prototype.then=M.prototype.then;
M.prototype.$goog_Thenable=!0;M.prototype.cancel=function(a){0==this.G&&uc(function(){var b=new xc(a);Dc(this,b)},this)};
var Dc=function(a,b){if(0==a.G)if(a.J){var c=a.J;if(c.$){for(var d=0,e=null,f=null,g=c.$;g&&(g.rb||(d++,g.ma==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(0==c.G&&1==d?Dc(c,b):(f?(d=f,v(c.$),v(null!=d),d.next==c.Ga&&(c.Ga=d),d.next=d.next.next):Ec(c),Fc(c,e,3,b)))}a.J=null}else wc(a,3,b)},Hc=function(a,b){a.$||2!=a.G&&3!=a.G||Gc(a);v(null!=b.wa);a.Ga?a.Ga.next=b:a.$=b;a.Ga=b},Cc=function(a,b,c,d){var e=Ac(null,null,null);e.ma=new M(function(a,g){e.wa=b?function(c){try{var e=b.call(d,c);a(e)}catch(D){g(D)}}:
a;e.Oa=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof xc?g(b):a(e)}catch(D){g(D)}}:g});e.ma.J=a;Hc(a,e);return e.ma};M.prototype.Xe=function(a){v(1==this.G);this.G=0;wc(this,2,a)};M.prototype.Ye=function(a){v(1==this.G);this.G=0;wc(this,3,a)};
var wc=function(a,b,c){if(0==a.G){a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself"));a.G=1;a:{var d=c,e=a.Xe,f=a.Ye;if(d instanceof M){null!=e&&Ea(e,"opt_onFulfilled should be a function.");null!=f&&Ea(f,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");Hc(d,Ac(e||ja,f||null,a));var g=!0}else{if(d)try{var r=!!d.$goog_Thenable}catch(D){r=!1}else r=!1;if(r)d.then(e,f,a),g=!0;else{if(na(d))try{var H=d.then;if(q(H)){Ic(d,H,e,f,
a);g=!0;break a}}catch(D){f.call(a,D);g=!0;break a}g=!1}}}g||(a.$c=c,a.G=b,a.J=null,Gc(a),3!=b||c instanceof xc||Jc(a,c))}},Ic=function(a,b,c,d,e){var f=!1,g=function(a){f||(f=!0,c.call(e,a))},r=function(a){f||(f=!0,d.call(e,a))};try{b.call(a,g,r)}catch(H){r(H)}},Gc=function(a){a.ac||(a.ac=!0,uc(a.ce,a))},Ec=function(a){var b=null;a.$&&(b=a.$,a.$=b.next,b.next=null);a.$||(a.Ga=null);null!=b&&v(null!=b.wa);return b};
M.prototype.ce=function(){for(var a;a=Ec(this);)Fc(this,a,this.G,this.$c);this.ac=!1};var Fc=function(a,b,c,d){if(3==c&&b.Oa&&!b.rb)for(;a&&a.xb;a=a.J)a.xb=!1;if(b.ma)b.ma.J=null,Kc(b,c,d);else try{b.rb?b.wa.call(b.context):Kc(b,c,d)}catch(e){Lc.call(null,e)}zc.put(b)},Kc=function(a,b,c){2==b?a.wa.call(a.context,c):a.Oa&&a.Oa.call(a.context,c)},Jc=function(a,b){a.xb=!0;uc(function(){a.xb&&Lc.call(null,b)})},Lc=kc,xc=function(a){ua.call(this,a)};sa(xc,ua);xc.prototype.name="cancel";var Mc=function(a,b,c){if(q(a))c&&(a=t(a,c));else if(a&&"function"==typeof a.handleEvent)a=t(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:m.setTimeout(a,b||0)};var Oc=function(a,b){K.call(this);this.vd=n(a)?a:!0;this.ec=b||Nc;this.Fb=this.ec(this.ib)};sa(Oc,K);h=Oc.prototype;h.H=null;h.ca=null;h.Pa=void 0;h.Vb=!1;h.ib=0;h.Aa=null;var Pc=Oc.prototype,Qc=z("goog.net.WebSocket");Pc.I=Qc;var Nc=function(a){return Math.min(1E3*Math.pow(2,a),6E4)};h=Oc.prototype;
h.open=function(a,b){v(m.WebSocket,"This browser does not support WebSocket");v(!this.bb(),"The WebSocket is already open");null!=this.Aa&&m.clearTimeout(this.Aa);this.Aa=null;this.ca=a;(this.Pa=b)?(E(this.I,"Opening the WebSocket on "+this.ca+" with protocol "+this.Pa),this.H=new WebSocket(this.ca,this.Pa)):(E(this.I,"Opening the WebSocket on "+this.ca),this.H=new WebSocket(this.ca));this.H.onopen=t(this.Ae,this);this.H.onclose=t(this.ze,this);this.H.onmessage=t(this.F,this);this.H.onerror=t(this.lc,
this)};h.close=function(){null!=this.Aa&&m.clearTimeout(this.Aa);this.Aa=null;this.H&&(E(this.I,"Closing the WebSocket."),this.Vb=!0,this.H.close(),this.H=null)};h.send=function(a){v(this.bb(),"Cannot send without an open socket");this.H.send(a)};h.bb=function(){return!!this.H&&1==this.H.readyState};h.Ae=function(){E(this.I,"WebSocket opened on "+this.ca);this.dispatchEvent("d");this.ib=0;this.Fb=this.ec(this.ib)};
h.ze=function(a){E(this.I,"The WebSocket on "+this.ca+" closed.");this.dispatchEvent("a");this.H=null;this.Vb?(E(this.I,"The WebSocket closed normally."),this.ca=null,this.Pa=void 0):(B(this.I,"The WebSocket disconnected unexpectedly: "+a.data),this.vd&&(E(this.I,"Seconds until next reconnect attempt: "+Math.floor(this.Fb/1E3)),this.Aa=Mc(t(this.open,this,this.ca,this.Pa),this.Fb,this),this.ib++,this.Fb=this.ec(this.ib)));this.Vb=!1};h.F=function(a){this.dispatchEvent(new Rc(a.data))};
h.lc=function(a){a=a.data;B(this.I,"An error occurred: "+a);this.dispatchEvent(new Sc(a))};h.D=function(){Oc.Sa.D.call(this);this.close()};var Rc=function(a){G.call(this,"c");this.message=a};sa(Rc,G);var Sc=function(a){G.call(this,"b");this.data=a};sa(Sc,G);u("cast.receiver.platform.PlatformValueKey",{df:"port-for-web-server",af:"log-level-cast-receiver",bf:"max-video-resolution-vpx",$e:"device-model",Ze:"cast-receiver-version",ef:"system-version",ff:"volume-controllable"});var Tc={"port-for-web-server":"8008"};u("cast.receiver.platform.canDisplayType",function(a){return cast.__platform__.canDisplayType(a)});cast.__platform__&&cast.__platform__.canDisplayType||delete window.cast.receiver.platform.canDisplayType;
u("cast.receiver.platform.VideoResolution",function(){});var Uc=function(a){if(cast.__platform__&&cast.__platform__.queryPlatformValue)return cast.__platform__.queryPlatformValue(a);if(a in Tc)return Tc[a]};u("cast.receiver.platform.getValue",Uc);u("cast.receiver.platform.getHdcpVersion",function(){return cast.__platform__&&cast.__platform__.display&&cast.__platform__.display.getHdcpVersion?cast.__platform__.display.getHdcpVersion():Promise.reject(Error("getHdcpVersion is not available"))});
var Vc=function(){this.h=new K;this.xa=!1};h=Vc.prototype;h.Xa=function(){return"PlatformChannel"};h.open=function(){this.xa?B(Wc,this.Xa()+" Already open"):cast.__platform__.channel.open(t(this.pc,this),t(this.F,this))};h.close=function(){this.xa?cast.__platform__.channel.close(t(this.jc,this)):B(Wc,this.Xa()+" Cannot close unopened channel")};h.bb=function(){return this.xa};h.send=function(a){v(this.xa,"Cannot send until channel is openned");cast.__platform__.channel.send(a)};
h.pc=function(a){this.xa=a;this.f(a?"d":"b")};h.jc=function(){this.xa&&(this.xa=!1,this.f("a"))};h.F=function(a){this.f(new Rc(a))};h.addEventListener=function(a,b){this.h.Na(a,b)};h.removeEventListener=function(a,b){this.h.mb(a,b)};h.f=function(a){a=ia(a)?new G(a):a;a.target=this;this.h.dispatchEvent(a)};var Wc=z("cast.receiver.platform.WebSocket");u("cast.receiver.system.NAMESPACE_PREFIX","urn:x-cast:");u("cast.receiver.system.ApplicationData",function(){this.name=this.id="";this.sessionId=0;this.namespaces=[];this.launchingSenderId=""});u("cast.receiver.system.SystemVolumeData",function(){this.level=1;this.muted=!1});u("cast.receiver.system.Sender",function(){this.userAgent=this.id=""});u("cast.receiver.system.VisibilityState",{VISIBLE:"visible",NOT_VISIBLE:"notvisible",UNKNOWN:"unknown"});
u("cast.receiver.system.StandbyState",{STANDBY:"standby",NOT_STANDBY:"notstandby",UNKNOWN:"unknown"});u("cast.receiver.system.SystemState",{NOT_STARTED:"notstarted",STARTING_IN_BACKGROUND:"startinginbackground",STARTING:"starting",READY:"ready",STOPPING_IN_BACKGROUND:"stoppinginbackground",STOPPING:"stopping"});var Zc=function(){this.T=null;cast.__platform__&&cast.__platform__.channel?(E(Xc,"Opening platform websocket"),Yc(this,new Vc)):(E(Xc,"Opening net websocket"),Yc(this,new Oc(!0)));this.h=new K};u("cast.receiver.IpcChannel",Zc);Zc.prototype.Xa=function(){return"IpcChannel"};
var Yc=function(a,b){a.T&&a.T.M();a.T=b;a.T.addEventListener("d",a.pc.bind(a));a.T.addEventListener("a",a.jc.bind(a));a.T.addEventListener("b",a.lc.bind(a));a.T.addEventListener("c",a.F.bind(a))},ad=function(a,b){Fb(Xc,a.Xa()+" "+b);a.f(new $c("urn:x-cast:com.google.cast.system","SystemSender",JSON.stringify({type:b})))};h=Zc.prototype;h.pc=function(){ad(this,"opened")};h.jc=function(){ad(this,"closed")};h.lc=function(){ad(this,"error")};
h.F=function(a){Fb(Xc,"Received message: "+a.message);var b=(a=JSON.parse(a.message))&&a.namespace;a&&b&&a.senderId&&a.data?this.f(new $c(b,a.senderId,a.data)):B(Xc,this.Xa()+" Message received is invalid")};h.open=function(){E(Xc,"Opening message bus websocket");this.T.open("ws://localhost:"+Uc("port-for-web-server")+"/v2/ipc")};h.close=function(){E(Xc,"Closing message bus websocket");this.T.close()};h.bb=function(){return this.T.bb()};
h.send=function(a,b,c){a=JSON.stringify({namespace:a,senderId:b,data:c});Fb(Xc,"IPC message sent: "+a);this.T.send(a)};h.addEventListener=function(a,b){this.h.Na(a,b)};h.removeEventListener=function(a,b){this.h.mb(a,b)};h.f=function(a){a.target=this;this.h.dispatchEvent(a)};var Xc=z("cast.receiver.IpcChannel"),$c=function(a,b,c){G.call(this,a);this.senderId=b;this.data=c};k($c,G);var N=function(a,b,c,d){F.call(this);this.R=a;this.aa=b;this.hc=!1;this.ua=d||"STRING";this.h=new K;this.qc=this.onMessage=null;this.serializeMessage=this.$d;this.deserializeMessage=this.Cd;this.B={};a=l(c);for(b=a.next();!b.done;b=a.next())this.B[b.value]=null;this.Lc=this.Ib.bind(this);this.aa.addEventListener(this.R,this.Lc)};k(N,F);u("cast.receiver.CastMessageBus",N);N.prototype.da=function(){return"CastMessageBus["+this.R+"]"};N.prototype.pa=function(){return this.R};
N.prototype.getNamespace=N.prototype.pa;N.prototype.le=function(){return this.ua};N.prototype.getMessageType=N.prototype.le;var bd=function(a,b,c,d){a.Ib(new $c(b,c,d))};N.prototype.Ib=function(a){A(cd,y,"Dispatching CastMessageBus message");var b="STRING"==this.ua?a.data:this.deserializeMessage(a.data);this.f(new dd(a.senderId,a.senderId,b));a=new dd("message",a.senderId,b);if(this.onMessage)this.onMessage(a);this.f(a)};
N.prototype.send=function(a,b){this.hc||"urn:x-cast:com.google.cast.system"==this.R||C(cd,"Application should not send requests before the system is ready (they will be ignored)");if(!this.qc||!this.qc(a,this.R,b))if("STRING"==this.ua){if(!ia(b))throw Error("Wrong argument, CastMessageBus type is STRING");this.aa.send(this.R,a,b)}else this.aa.send(this.R,a,this.serializeMessage(b))};N.prototype.send=N.prototype.send;N.prototype.Rb=function(a){this.send("*:*",a)};N.prototype.broadcast=N.prototype.Rb;
N.prototype.fe=function(a){if(Ua(this.B,a))return this.B[a]||(this.B[a]=new L(this,a)),this.B[a];throw Error("Requested a socket for a disconnected sender: "+a);};N.prototype.getCastChannel=N.prototype.fe;N.prototype.$d=function(a){if("JSON"!=this.ua)throw Error("Unexpected message type for JSON serialization");return JSON.stringify(a)};N.prototype.Cd=function(a){if("JSON"!=this.ua)throw Error("Unexpected message type for JSON serialization");return JSON.parse(a)};
N.prototype.D=function(){F.prototype.D.call(this);this.aa.removeEventListener(this.R,this.Lc);this.h.M();for(var a in this.B)this.B[a]&&this.B[a].close();this.B={};A(cd,y,"Disposed "+this.da())};N.prototype.addEventListener=function(a,b){I(this.h,a,b)};N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=function(a,b){J(this.h,a,b)};N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.f=function(a){a.target=this;return dc(this.h,a)};
N.prototype.dispatchEvent=function(a){return this.f(a)};N.prototype.dispatchEvent=N.prototype.dispatchEvent;N.MessageType={STRING:"STRING",JSON:"JSON",CUSTOM:"CUSTOM"};N.EventType={MESSAGE:"message"};var cd=z("cast.receiver.CastMessageBus"),dd=function(a,b,c){G.call(this,a);this.senderId=b;this.data=c};k(dd,G);N.Event=dd;var ed=function(){this.Yc=ra()},fd=new ed;ed.prototype.set=function(a){this.Yc=a};ed.prototype.reset=function(){this.set(ra())};ed.prototype.get=function(){return this.Yc};var gd=function(a){this.De=a||"";this.Ve=fd};h=gd.prototype;h.xc=!0;h.md=!0;h.Te=!0;h.Se=!0;h.nd=!1;h.Ue=!1;var hd=function(a){return 10>a?"0"+a:String(a)},id=function(a,b){a=(a.pd-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b},jd=function(a){gd.call(this,a)};sa(jd,gd);var kd=function(){this.Ee=t(this.ud,this);this.wb=new jd;this.wb.md=!1;this.wb.nd=!1;this.Hc=this.wb.xc=!1;this.de={}};
kd.prototype.ud=function(a){if(!this.de[a.Ic]){var b=this.wb;var c=[];c.push(b.De," ");if(b.md){var d=new Date(a.pd);c.push("[",hd(d.getFullYear()-2E3)+hd(d.getMonth()+1)+hd(d.getDate())+" "+hd(d.getHours())+":"+hd(d.getMinutes())+":"+hd(d.getSeconds())+"."+hd(Math.floor(d.getMilliseconds()/10)),"] ")}b.Te&&c.push("[",id(a,b.Ve.get()),"s] ");b.Se&&c.push("[",a.Ic,"] ");b.Ue&&c.push("[",a.sa.name,"] ");c.push(a.Mc);b.nd&&(d=a.$b)&&c.push("\n",d instanceof Error?d.message:d.toString());b.xc&&c.push("\n");
b=c.join("");if(c=ld)switch(a.sa){case sb:md(c,"info",b);break;case tb:md(c,"error",b);break;case ub:md(c,"warn",b);break;default:md(c,"debug",b)}}};var nd=null,ld=m.console,md=function(a,b,c){if(a[b])a[b](c);else a.log(c)};var od="StopIteration"in m?m.StopIteration:{message:"StopIteration",stack:""},pd=function(){};pd.prototype.next=function(){throw od;};pd.prototype.sd=function(){return this};var qd=function(a,b){this.O={};this.m=[];this.ob=this.na=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)};qd.prototype.Dc=function(){rd(this);for(var a=[],b=0;b<this.m.length;b++)a.push(this.O[this.m[b]]);return a};var sd=function(a){rd(a);return a.m.concat()};qd.prototype.fc=function(){return 0==this.na};qd.prototype.clear=function(){this.O={};this.ob=this.na=this.m.length=0};
qd.prototype.remove=function(a){return td(this.O,a)?(delete this.O[a],this.na--,this.ob++,this.m.length>2*this.na&&rd(this),!0):!1};var rd=function(a){var b,c;if(a.na!=a.m.length){for(b=c=0;c<a.m.length;){var d=a.m[c];td(a.O,d)&&(a.m[b++]=d);c++}a.m.length=b}if(a.na!=a.m.length){var e={};for(b=c=0;c<a.m.length;)d=a.m[c],td(e,d)||(a.m[b++]=d,e[d]=1),c++;a.m.length=b}};h=qd.prototype;h.get=function(a,b){return td(this.O,a)?this.O[a]:b};
h.set=function(a,b){td(this.O,a)||(this.na++,this.m.push(a),this.ob++);this.O[a]=b};h.addAll=function(a){if(a instanceof qd){var b=sd(a);a=a.Dc()}else{b=Ta(a);var c=[],d=0,e;for(e in a)c[d++]=a[e];a=c}for(c=0;c<b.length;c++)this.set(b[c],a[c])};h.forEach=function(a,b){for(var c=sd(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};h.clone=function(){return new qd(this)};
h.sd=function(a){rd(this);var b=0,c=this.ob,d=this,e=new pd;e.next=function(){if(c!=d.ob)throw Error("The map has changed since the iterator was created");if(b>=d.m.length)throw od;var e=d.m[b++];return a?e:d.O[e]};return e};var td=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};u("cast.receiver.media.MEDIA_NAMESPACE","urn:x-cast:com.google.cast.media");u("cast.receiver.media.StreamType",{BUFFERED:"BUFFERED",LIVE:"LIVE",NONE:"NONE"});u("cast.receiver.media.HdrType",{SDR:"sdr",HDR:"hdr",DV:"dv"});u("cast.receiver.media.ErrorType",{INVALID_PLAYER_STATE:"INVALID_PLAYER_STATE",LOAD_FAILED:"LOAD_FAILED",LOAD_CANCELLED:"LOAD_CANCELLED",INVALID_REQUEST:"INVALID_REQUEST",ERROR:"ERROR"});
u("cast.receiver.media.ErrorReason",{INVALID_COMMAND:"INVALID_COMMAND",INVALID_PARAMS:"INVALID_PARAMS",INVALID_MEDIA_SESSION_ID:"INVALID_MEDIA_SESSION_ID",SKIP_LIMIT_REACHED:"SKIP_LIMIT_REACHED",NOT_SUPPORTED:"NOT_SUPPORTED",LANGUAGE_NOT_SUPPORTED:"LANGUAGE_NOT_SUPPORTED",END_OF_QUEUE:"END_OF_QUEUE",DUPLICATE_REQUEST_ID:"DUPLICATE_REQUEST_ID"});u("cast.receiver.media.IdleReason",{CANCELLED:"CANCELLED",INTERRUPTED:"INTERRUPTED",FINISHED:"FINISHED",ERROR:"ERROR"});
u("cast.receiver.media.SeekResumeState",{PLAYBACK_START:"PLAYBACK_START",PLAYBACK_PAUSE:"PLAYBACK_PAUSE"});u("cast.receiver.media.PlayerState",{IDLE:"IDLE",PLAYING:"PLAYING",PAUSED:"PAUSED",BUFFERING:"BUFFERING"});u("cast.receiver.media.ExtendedPlayerState",{LOADING:"LOADING"});var ud=function(){this.contentId="";this.streamType="NONE";this.contentType="";this.breakClips=this.breaks=this.customData=this.textTrackStyle=this.tracks=this.duration=this.entityId=this.metadata=void 0};
u("cast.receiver.media.MediaInformation",ud);var vd=function(a,b,c,d,e,f,g){this.id=a;this.queueType=this.entityId=void 0;this.name=b;this.description=c;this.repeatMode=d;this.items=e;this.startIndex=f;this.startTime=g};u("cast.receiver.media.QueueData",vd);u("cast.receiver.media.QueueType",{ALBUM:"ALBUM",PLAYLIST:"PLAYLIST",AUDIOBOOK:"AUDIOBOOK",RADIO_STATION:"RADIO_STATION",PODCAST_SERIES:"PODCAST_SERIES",TV_SERIES:"TV_SERIES",VIDEO_PLAYLIST:"VIDEO_PLAYLIST",LIVE_TV:"LIVE_TV",MOVIE:"MOVIE"});
u("cast.receiver.media.MetadataType",{GENERIC:0,MOVIE:1,TV_SHOW:2,MUSIC_TRACK:3,PHOTO:4});var wd=function(a){this.metadataType=a};u("cast.receiver.media.MediaMetadata",wd);var xd=function(){this.metadataType=0;this.releaseDate=this.releaseYear=this.images=this.subtitle=this.title=void 0};k(xd,wd);u("cast.receiver.media.GenericMediaMetadata",xd);var yd=function(){this.metadataType=1;this.releaseDate=this.releaseYear=this.images=this.subtitle=this.studio=this.title=void 0};k(yd,wd);
u("cast.receiver.media.MovieMediaMetadata",yd);var zd=function(){this.metadataType=2;this.originalAirdate=this.releaseYear=this.images=this.episode=this.episodeNumber=this.season=this.seasonNumber=this.episodeTitle=this.title=this.seriesTitle=void 0};k(zd,wd);u("cast.receiver.media.TvShowMediaMetadata",zd);
var Ad=function(){this.metadataType=3;this.releaseDate=this.releaseYear=this.images=this.discNumber=this.trackNumber=this.artistName=this.songName=this.composer=this.artist=this.albumArtist=this.title=this.albumName=void 0};k(Ad,wd);u("cast.receiver.media.MusicTrackMediaMetadata",Ad);var Bd=function(){this.metadataType=4;this.creationDateTime=this.height=this.width=this.longitude=this.latitude=this.images=this.location=this.artist=this.title=void 0};k(Bd,wd);
u("cast.receiver.media.PhotoMediaMetadata",Bd);u("cast.receiver.media.Image",function(a){this.url=a;this.width=this.height=void 0});var Cd=function(){this.muted=this.level=void 0};u("cast.receiver.media.Volume",Cd);var Dd=function(a,b,c){this.width=a;this.height=b;this.hdrType=c};u("cast.receiver.media.VideoInformation",Dd);
var Ed=function(){this.type="MEDIA_STATUS";this.mediaSessionId=0;this.videoInfo=this.queueData=this.media=void 0;this.playbackRate=1;this.playerState="IDLE";this.idleReason=void 0;this.supportedMediaCommands=this.currentTime=0;this.volume={level:0,muted:!1};this.extendedStatus=this.breakStatus=this.repeatMode=this.items=this.customData=this.preloadedItemId=this.loadingItemId=this.currentItemId=this.activeTrackIds=void 0};u("cast.receiver.media.MediaStatus",Ed);
var Fd=function(a,b){this.playerState=a;this.media=b};u("cast.receiver.media.ExtendedMediaStatus",Fd);var Gd=function(){Ed.call(this)};k(Gd,Ed);u("cast.receiver.media.CloudMediaStatus",Gd);u("cast.receiver.media.Command",{PAUSE:1,SEEK:2,STREAM_VOLUME:4,STREAM_MUTE:8,ALL_BASIC_MEDIA:15,QUEUE_NEXT:64,QUEUE_PREV:128,QUEUE_SHUFFLE:256});u("cast.receiver.media.TrackType",{TEXT:"TEXT",AUDIO:"AUDIO",VIDEO:"VIDEO"});
u("cast.receiver.media.TextTrackType",{SUBTITLES:"SUBTITLES",CAPTIONS:"CAPTIONS",DESCRIPTIONS:"DESCRIPTIONS",CHAPTERS:"CHAPTERS",METADATA:"METADATA"});u("cast.receiver.media.TextTrackEdgeType",{NONE:"NONE",OUTLINE:"OUTLINE",DROP_SHADOW:"DROP_SHADOW",RAISED:"RAISED",DEPRESSED:"DEPRESSED"});u("cast.receiver.media.TextTrackWindowType",{NONE:"NONE",NORMAL:"NORMAL",ROUNDED_CORNERS:"ROUNDED_CORNERS"});
u("cast.receiver.media.TextTrackFontGenericFamily",{SANS_SERIF:"SANS_SERIF",MONOSPACED_SANS_SERIF:"MONOSPACED_SANS_SERIF",SERIF:"SERIF",MONOSPACED_SERIF:"MONOSPACED_SERIF",CASUAL:"CASUAL",CURSIVE:"CURSIVE",SMALL_CAPITALS:"SMALL_CAPITALS"});u("cast.receiver.media.TextTrackFontStyle",{NORMAL:"NORMAL",BOLD:"BOLD",BOLD_ITALIC:"BOLD_ITALIC",ITALIC:"ITALIC"});
u("cast.receiver.media.Track",function(a,b){this.trackId=a;this.trackContentType=this.trackContentId=void 0;this.type=b;this.customData=this.subtype=this.language=this.name=void 0});u("cast.receiver.media.TextTrackStyle",function(){this.customData=this.fontStyle=this.fontGenericFamily=this.fontFamily=this.windowRoundedCornerRadius=this.windowColor=this.windowType=this.edgeColor=this.edgeType=this.backgroundColor=this.foregroundColor=this.fontScale=void 0});
u("cast.receiver.media.TracksInfo",function(){this.textTrackStyle=this.language=this.activeTrackIds=this.tracks=void 0});var Hd={REPEAT_OFF:"REPEAT_OFF",REPEAT_ALL:"REPEAT_ALL",REPEAT_SINGLE:"REPEAT_SINGLE",REPEAT_ALL_AND_SHUFFLE:"REPEAT_ALL_AND_SHUFFLE"};u("cast.receiver.media.RepeatMode",Hd);u("cast.receiver.media.QueueChangeType",{INSERT:"INSERT",REMOVE:"REMOVE",ITEMS_CHANGE:"ITEMS_CHANGE",UPDATE:"UPDATE",NO_CHANGE:"NO_CHANGE"});
var Id=function(){this.type="QUEUE_CHANGE";this.sequenceNumber=this.insertBefore=this.itemIds=this.changeType=this.requestId=void 0};u("cast.receiver.media.QueueChange",Id);var Jd=function(){this.type="ITEMS_INFO";this.items=this.requestId=void 0};u("cast.receiver.media.ItemsInfo",Jd);var Kd=function(){this.type="QUEUE_IDS";this.ids=this.requestId=void 0};u("cast.receiver.media.QueueIds",Kd);u("cast.receiver.media.repeatMode",Hd);
var Ld=function(a){return"REPEAT_OFF"==a||"REPEAT_ALL"==a||"REPEAT_SINGLE"==a||"REPEAT_ALL_AND_SHUFFLE"==a};u("cast.receiver.media.GetStatusOptions",{NO_METADATA:1,NO_QUEUE_ITEMS:2});u("cast.receiver.media.Break",function(a,b,c){this.id=a;this.breakClipIds=b;this.position=c;this.duration=void 0;this.isWatched=!1;this.isEmbedded=void 0});
u("cast.receiver.media.BreakClip",function(a){this.id=a;this.customData=this.clickThroughUrl=this.posterUrl=this.duration=this.title=this.contentType=this.contentId=void 0});u("cast.receiver.media.BreakStatus",function(a,b){this.currentBreakTime=a;this.currentBreakClipTime=b;this.whenSkippable=this.breakClipId=this.breakId=void 0});var Md=function(){this.L=O.ea();this.Jc=0;this.qb=null;this.Ra=new qd;this.Ie=this.Je.bind(this);this.P=this.L.Ka("urn:x-cast:com.google.cast.inject","JSON");this.P.onMessage=this.F.bind(this);for(var a=l(["urn:x-cast:com.google.cast.cac","urn:x-cast:com.google.cast.media"]),b=a.next();!b.done;b=a.next())if(b=this.L.v[b.value]||null)b.qc=this.Ie};
Md.prototype.F=function(a){var b=this,c=a.data,d=c.requestId,e=a.senderId;if("WRAPPED"!=c.type)this.S("Unsupported message type "+c.type,e,d);else{a=JSON.parse(c.data);var c=a.namespace,f=this.L.v[c]||null;if(f){var g=!1;if("urn:x-cast:com.google.cast.cac"==c)a.data.requestId=d,g=!0;else if("urn:x-cast:com.google.cast.media"==c){var r=a.data;r.requestId=d;r.mediaSessionId=this.Jc}else{this.S("Unsupported namespace "+c,e,d);return}this.Ra.set(d,e);try{this.qb=null,bd(f,c,"__inject__",JSON.stringify(a.data))}catch(D){throw this.Ra.remove(d),
this.S("Injecting "+a.data+" failed with "+D,e,d),D;}if(!g){var H=function(){return b.qb?(b.Ra.remove(d),b.S("Error "+JSON.stringify(b.qb),e,d,"WRAPPED_ERROR",b.qb),!0):!1};H()||setTimeout(function(){H()||(b.Ra.remove(d),Nd(b,e,d))},5)}}else this.S("Unregistered namespace "+c,e,d,"WRAPPED_ERROR",{type:"ERROR",code:"UNREGISTERED_NAMESPACE"})}};
Md.prototype.Je=function(a,b,c){if("urn:x-cast:com.google.cast.media"==b&&"STRING"==(this.L.v[b]||null).ua)try{c=JSON.parse(c)}catch(e){return B(Od,"Parse failed: "+c),!1}var d=c.type;"urn:x-cast:com.google.cast.media"==b&&"MEDIA_STATUS"==d&&c.status&&c.status[0]&&(this.Jc=c.status[0].mediaSessionId);if("__inject__"!=a)return!1;a=c.requestId;if(!n(a))return C(Od,"No requestId in "+c),!0;if("urn:x-cast:com.google.cast.media"==b){switch(d){case "INVALID_REQUEST":case "INVALID_PLAYER_STATE":b=c.reason,
this.qb={type:"ERROR",code:b?b:d}}return!0}d=this.Ra.get(a);if(!d)return B(Od,"Request not found "+a),!0;this.Ra.remove(a);if("urn:x-cast:com.google.cast.cac"!=b)return B(Od,"Unsupported namespace "+b),!0;b=c;switch(b.type){case "SUCCESS":Nd(this,d,a,Object.getOwnPropertyNames(c).some(function(a){return"type"!=a&&"requestId"!=a&&n(c[a])})?JSON.stringify(c):void 0);break;case "ERROR":this.S("Wrapped error",d,a,"WRAPPED_ERROR",b);break;default:this.S("Unknown message type "+c,d,a)}return!0};
Md.prototype.S=function(a,b,c,d,e){B(Od,a);this.P.send(b,new Pd(c,d||"INJECT_ERROR",n(e)?JSON.stringify(e):void 0))};var Nd=function(a,b,c,d){a.P.send(b,new Qd(c,d))};ka(Md);var Od=z("cast.receiver.InjectManager"),Rd=function(a,b,c){this.type=a;this.requestId=b;this.data=c},Qd=function(a,b){Rd.call(this,"SUCCESS",a,b)};k(Qd,Rd);var Pd=function(a,b,c){Rd.call(this,"ERROR",a,c);this.code=b};k(Pd,Rd);var O=function(){F.call(this);nd||(nd=new kd);if(nd){var a=nd;if(1!=a.Hc){Eb();var b=Db,c=a.Ee;b.$a||(b.$a=[]);b.$a.push(c);a.Hc=!0}}this.C=Va(Sd);this.hb=!1;this.aa=new Zc;this.X={};this.h=new K;this.la=new N("urn:x-cast:com.google.cast.system",this.aa,Ta(this.X),"JSON");Gb(this,qa(Hb,this.la));this.Xb=this.Qb=null;this.Gc=!1;this.eb=this.fb=null;this.Lb=!0;this.ue="1.11";this.Da="notstarted";this.rd=null;this.v={};this.mc=this.onMaxVideoResolutionChanged=this.onFeedbackStarted=this.onStandbyChanged=
this.onVisibilityChanged=this.onSystemVolumeChanged=this.onSenderDisconnected=this.onSenderConnected=this.onShutdown=this.onReady=null;this.la.addEventListener("SystemSender",this.Be.bind(this));I(window,"unload",this.rc,!1,this);I(document,"visibilitychange",this.Qc,!1,this);A(P,sb,"Version: 2.0.0.0051");Td&&Td(this)};k(O,F);u("cast.receiver.CastReceiverManager",O);var Ud=function(a){var b=a.toLocaleLowerCase();return["com.vizio.vue","com.vizio.smartcast"].some(function(a){return b.includes(a)})};
O.prototype.da=function(){return"CastReceiverManager"};O.prototype.start=function(a){if(a){if(!a)throw Error("Cannot validate undefined config.");if(void 0!=a.maxInactivity&&5>a.maxInactivity)throw Error("config.maxInactivity must be greater than or equal to 5 seconds.");Ya(this.C,a||{})}Md.ea();this.Gc=!0;this.aa.open()};O.prototype.start=O.prototype.start;O.prototype.stop=function(){this.M();window.close()};O.prototype.stop=O.prototype.stop;O.prototype.Db=function(){return"ready"==this.Da};
O.prototype.isSystemReady=O.prototype.Db;O.prototype.getSenders=function(){return Ta(this.X)};O.prototype.getSenders=O.prototype.getSenders;O.prototype.ne=function(a){return this.X[a]?Va(this.X[a]):null};O.prototype.getSender=O.prototype.ne;O.prototype.re=function(){return null==this.fb?this.eb?"notvisible":"unknown":this.fb?"visible":"notvisible"};O.prototype.getVisibilityState=O.prototype.re;O.prototype.pe=function(){return null==this.eb?this.fb?"notstandby":"unknown":this.eb?"standby":"notstandby"};
O.prototype.getStandbyState=O.prototype.pe;O.prototype.Cc=function(){"notstarted"==this.Da&&(this.Da=/[&?]google_cast_bg=true(&|$)/.test(window.location.search)?"startinginbackground":"starting");return this.Da};O.prototype.getSystemState=O.prototype.Cc;O.prototype.ee=function(){return this.Qb};O.prototype.getApplicationData=O.prototype.ee;O.prototype.ge=function(){return this.Xb};O.prototype.getDeviceCapabilities=O.prototype.ge;
O.prototype.Ke=function(a){this.Db()?Vd(this,a):this.C.statusText!=a&&(this.C.statusText=a,this.hb=!0)};O.prototype.setApplicationState=O.prototype.Ke;O.prototype.Me=function(a,b){this.Db()?Vd(this,a,b):(void 0!=a&&a!=this.C.statusText&&(this.C.statusText=a,this.hb=!0),void 0!=b&&b!=this.C.dialData&&(this.C.dialData=b,this.hb=!0))};O.prototype.setLegacyApplicationState=O.prototype.Me;
O.prototype.Pe=function(a){if(0>a||1<a)throw Error("Invalid level value");this.la.send("SystemSender",{type:"setvolume",level:a})};O.prototype.setSystemVolumeLevel=O.prototype.Pe;O.prototype.Qe=function(a){this.la.send("SystemSender",{type:"setvolume",muted:a})};O.prototype.setSystemVolumeMuted=O.prototype.Qe;O.prototype.qe=function(){return this.rd};O.prototype.getSystemVolume=O.prototype.qe;
var Vd=function(a,b,c){var d={type:"setappstate"};void 0!=b&&(d.statusText=b);void 0!=c&&(d.dialData=c);a.la.send("SystemSender",d)};O.prototype.hd=function(a){this.la.send("SystemSender",{type:"startheartbeat",maxInactivity:a})};O.prototype.setInactivityTimeout=O.prototype.hd;
O.prototype.Ka=function(a,b){if("urn:x-cast:com.google.cast.system"==a)throw Error("Protected namespace");if(0!=a.lastIndexOf("urn:x-cast:",0))throw Error("Invalid namespace prefix");if(!this.v[a]){if(this.Gc)throw Error("New namespaces can not be requested after start has been called");this.v[a]=new N(a,this.aa,Ta(this.X),b);Gb(this,qa(Hb,this.v[a]))}if(b&&this.v[a].ua!=b)throw Error("Invalid messageType for the namespace");return this.v[a]};O.prototype.getCastMessageBus=O.prototype.Ka;
O.prototype.dd=function(a){this.la.send("SystemSender",{type:"sendfeedbackmessage",message:a})};O.prototype.sendFeedbackMessage=O.prototype.dd;
O.prototype.Be=function(a){a=a.data;switch(a.type){case "opened":E(P,"Underlying message bus is open");var b=Ta(this.v),c=this.C.statusText;a=this.C.dialData;var d={type:"ready"};c&&(d.statusText=c);a&&(d.dialData=a);d.activeNamespaces=b;d.version="2.0.0";d.messagesVersion="1.0";this.la.send("SystemSender",d);this.C.maxInactivity&&this.hd(this.C.maxInactivity);break;case "closed":this.rc();break;case "error":this.f(new Q("error",null));break;case "ready":b=a.launchingSenderId;c=Ta(this.v);this.Ob=
a.version;this.Lb=!Wd(this,this.ue);var e=a.deviceCapabilities;this.Xb=e?Va(e):{};this.Qb={id:a.applicationId,name:a.applicationName,sessionId:a.sessionId,namespaces:c,launchingSenderId:b};this.Da="ready";for(d in this.v)this.v[d].hc=!0;this.hb&&(this.hb=!1,Vd(this,this.C.statusText,this.C.dialData));E(P,"Dispatching CastReceiverManager system ready event");b=new Xd(this.Qb);if(this.onReady)this.onReady(b);this.f(b);break;case "senderconnected":b={id:a.senderId,userAgent:a.userAgent};if(Ud(b.id))E(P,
"Ignored connection from "+b.id);else{E(P,"Dispatching CastReceiverManager sender connected event ["+b.id+"]");Ua(this.X,b.id)&&B(P,"Unexpected connected message for already connected sender: "+b.id);this.X[b.id]=b;a=new Yd(b.id,b.userAgent);for(c in this.v)d=this.v[c],e=b.id,Ua(d.B,e)?B(cd,"Unexpected sender already registered ["+d.R+", "+e+"]"):(E(cd,"Registering sender ["+d.R+", "+e+"]"),d.B[e]=null);if(this.onSenderConnected)this.onSenderConnected(a);this.f(a)}break;case "senderdisconnected":c=
a.senderId;a=a.reason;if(Ud(c))E(P,"Ignored disconnection from "+c);else{switch(a){case "closed_by_peer":a="requested_by_sender";break;case "transport_invalid_message":a="error";break;default:a="unknown"}E(P,"Dispatching sender disconnected event ["+c+"] Reason: "+a);if(Ua(this.X,c)){d=this.X[c].userAgent;delete this.X[c];a=new Zd(c,d,a);for(b in this.v)d=this.v[b],e=c,Ua(d.B,e)&&(E(cd,"Unregistering sender ["+d.R+", "+e+"]"),d.B[e]&&d.B[e].close(),delete d.B[e]);if(this.onSenderDisconnected)this.onSenderDisconnected(a);
this.f(a)}else B(P,"Unknown sender disconnected: "+c)}break;case "volumechanged":this.rd=b={level:a.level,muted:a.muted};E(P,"Dispatching system volume changed event ["+b.level+", "+b.muted+"]");b=new $d(b);if(this.onSystemVolumeChanged)this.onSystemVolumeChanged(b);this.f(b);break;case "visibilitychanged":this.Lb||(b=a.visible,ae(this,n(b)?b:null));break;case "standbychanged":if(!this.Lb&&(b=a.standby,b=n(b)?b:null,b!=this.eb)){E(P,"Dispatching standby changed event "+b);this.eb=b;b=new be(1==b);
if(this.onStandbyChanged)this.onStandbyChanged(b);this.f(b)}break;case "maxvideoresolutionchanged":b=a.height;E(P,"Dispatching maxvideoresolutionchanged "+b);b=new ce(b);if(this.onMaxVideoResolutionChanged)this.onMaxVideoResolutionChanged(b);this.f(b);break;case "hdroutputtypechanged":this.mc&&this.mc(a.hdrType);break;case "screenresolutionchanged":break;case "feedbackstarted":E(P,"Dispatching feedback started event");b=new de;if(this.onFeedbackStarted)this.onFeedbackStarted(b);else this.dd("");break;
default:throw Error("Unexpected message type: "+a.type);}};var ae=function(a,b){if(b==a.fb)E(P,"Ignoring visibility changed event, state is already "+b);else{E(P,"Dispatching visibility changed event "+b);a.fb=b;b=new ee(0!=b);if(a.onVisibilityChanged)a.onVisibilityChanged(b);a.f(b)}};O.prototype.Qc=function(){this.Lb&&ae(this,"visible"==document.visibilityState)};
O.prototype.rc=function(){E(P,"Dispatching shutdown event");this.Cc();this.Da="startinginbackground"==this.Da?"stoppinginbackground":"stopping";for(var a in this.v)this.v[a].hc=!1;a=new fe;if(this.onShutdown)this.onShutdown(a);this.f(a)};
var Wd=function(a,b){if(!b)return B(P,"Version not provided"),!1;if(!a.Ob)return B(P,"No System Version"),!1;var c=b.split(".");if(!c.length)return B(P,"Version provided is not valid: "+b),!1;var d=a.Ob.split(".");if(!d.length)return B(P,"System Version format is not valid "+a.Ob),!1;for(var e=0;e<c.length;e++){var f=parseInt(c[e],10);if(isNaN(f))return B(P,"Version is not numeric: "+b),!1;var g=d.length>e?parseInt(d[e],10):0;if(isNaN(g))return B(P,"System Version is not numeric: "+a.Ob),!1;if(f>
g)return!1}return!0};O.prototype.D=function(){this.h.M();this.aa.close();F.prototype.D.call(this);window&&J(window,"unload",this.rc,!1,this);document&&J(document,"visibilitychange",this.Qc,!1,this);delete O.Ab;Fb(P,"Disposed "+this.da())};O.prototype.addEventListener=function(a,b){I(this.h,a,b)};O.prototype.addEventListener=O.prototype.addEventListener;O.prototype.removeEventListener=function(a,b){J(this.h,a,b)};O.prototype.removeEventListener=O.prototype.removeEventListener;
O.prototype.f=function(a){a.target=this;return dc(this.h,a)};O.prototype.dispatchEvent=function(a){return this.f(a)};O.prototype.dispatchEvent=O.prototype.dispatchEvent;ka(O);O.getInstance=O.ea;var Td=null,P=z("cast.receiver.CastReceiverManager");
O.EventType={READY:"ready",SHUTDOWN:"shutdown",SENDER_CONNECTED:"senderconnected",SENDER_DISCONNECTED:"senderdisconnected",ERROR:"error",SYSTEM_VOLUME_CHANGED:"systemvolumechanged",VISIBILITY_CHANGED:"visibilitychanged",STANDBY_CHANGED:"standbychanged",MAX_VIDEO_RESOLUTION_CHANGED:"maxvideoresolutionchanged",FEEDBACK_STARTED:"feedbackstarted"};var Q=function(a,b){G.call(this,a);this.data=b};k(Q,G);O.Event=Q;
u("cast.receiver.system.DisconnectReason",{REQUESTED_BY_SENDER:"requested_by_sender",ERROR:"error",UNKNOWN:"unknown"});var Zd=function(a,b,c){Q.call(this,"senderdisconnected",a);this.senderId=a;this.userAgent=b;this.reason=c};k(Zd,Q);O.SenderDisconnectedEvent=Zd;var Yd=function(a,b){Q.call(this,"senderconnected",a);this.senderId=a;this.userAgent=b};k(Yd,Q);O.SenderConnectedEvent=Yd;var ee=function(a){Q.call(this,"visibilitychanged",a);this.isVisible=a};k(ee,Q);O.VisibilityChangedEvent=ee;
var be=function(a){Q.call(this,"standbychanged",null);this.isStandby=a};k(be,Q);O.StandbyChangedEvent=be;var $d=function(a){Q.call(this,"systemvolumechanged",a);this.data=a};k($d,Q);O.SystemVolumeChangedEvent=$d;var Xd=function(a){Q.call(this,"ready",a);this.data=a};k(Xd,Q);O.ReadyEvent=Xd;var fe=function(){Q.call(this,"shutdown",null)};k(fe,Q);O.ShutdownEvent=fe;var de=function(){Q.call(this,"feedbackstarted",null)};k(de,Q);O.FeedbackStartedEvent=de;
var ce=function(a){Q.call(this,"maxvideoresolutionchanged",null);this.height=a};k(ce,Q);O.MaxVideoResolutionChangedEvent=ce;O.Config=function(){this.dialData=this.maxInactivity=this.statusText=void 0};var Sd={maxInactivity:10};var ge=function(){this.L=O.ea();this.P=this.L.Ka("urn:x-cast:com.google.cast.broadcast","JSON");this.P.onMessage=this.F.bind(this)};
ge.prototype.F=function(a){if(this.L.Db())C(he,"Ignoring broadcast request, system is ready.");else{a=a.data;var b=a.type;if("APPLICATION_BROADCAST"!=b)B(he,"Ignoring message type: "+b);else if(b=a.namespace){var c=this.L.v[b]||null;if(c)switch(b){case "urn:x-cast:com.google.cast.media":var d=JSON.parse(a.message);if("PRECACHE"!=d.type){B(he,"Unsupported type for media namespace: "+d.type);break}bd(c,b,"__broadcast__",a.message);break;default:B(he,"Unsupported namespace: "+a.namespace)}else B(he,
"Invalid message bus for namespace: "+b)}else B(he,"Missing namespace: "+b)}};ka(ge);var he=z("cast.receiver.BroadcastManager");u("cast.receiver.BroadcastManager.NAMESPACE_PREFIX","urn:x-cast:");u("cast.receiver.BroadcastManager.BroadcastRequest",function(){});var ie=function(){return!(!cast.__platform__||!cast.__platform__.metrics)};u("cast.receiver.analytics.logEvent",function(a){ie()&&cast.__platform__.metrics.logEventToUma(a)});u("cast.receiver.analytics.logBool",function(a,b){ie()&&cast.__platform__.metrics.logBoolToUma(a,b)});u("cast.receiver.analytics.logInt",function(a,b){ie()&&cast.__platform__.metrics.logIntToUma(a,b)});u("cast.receiver.analytics.logHistogramValue",function(a,b,c,d,e){ie()&&cast.__platform__.metrics.logHistogramValueToUma(a,b,c,d,e)});var R=function(){this.onFocusState=this.onCustomCommand=this.onDisplayStatus=this.onUserAction=this.onLoadByEntity=this.onSetCredentials=null;this.L=O.ea();this.P=this.L.Ka("urn:x-cast:com.google.cast.cac","JSON");this.P.onMessage=this.F.bind(this);this.jb=new qd};u("cast.receiver.CommandAndControlManager",R);
R.prototype.F=function(a){var b=a.data,c=b.type;a=a.senderId;switch(c){case "SET_CREDENTIALS":var d=this.onSetCredentials;break;case "LOAD_BY_ENTITY":d=this.onLoadByEntity;break;case "USER_ACTION":d=this.onUserAction;break;case "DISPLAY_STATUS":d=this.onDisplayStatus;break;case "CUSTOM_COMMAND":d=this.onCustomCommand;break;case "FOCUS_STATE":d=this.onFocusState;break;case "SUCCESS":case "ERROR":c=b.requestId;(a=this.jb.get(c))?(this.jb.remove(c),a(b)):C(je,"No matching request for response "+JSON.stringify(b));
return;default:this.S("Unsupported event "+c,a,b,"INVALID_REQUEST");return}d?ke(this,a,b,d):this.S("Handler for "+c+" not implemented",a,b,"INVALID_COMMAND")};
var ke=function(a,b,c,d){d=d(c);Bc(d).then(function(d){a.P.send(b,le(c,d))},function(d){a.S("Got a rejected promise "+JSON.stringify(d),b,c,"APP_ERROR")})},ne=function(a,b,c){B(je,a);a=new me(c);a.requestId=b.requestId;return a},le=function(a,b){if(!b)return ne("No response data",a,"APP_ERROR");switch(b.type){case "SUCCESS":case "ERROR":return b.requestId=a.requestId,b}return ne("Invalid response data "+JSON.stringify(b),a,"APP_ERROR")};R.prototype.S=function(a,b,c,d){this.P.send(b,ne(a,c,d))};
R.prototype.Oe=function(a,b){if(null!==b&&!q(b))throw B(je,"Given handler is not a function or null"),Error("Given handler is not a function or null");switch(a){case "SET_CREDENTIALS":this.onSetCredentials=b;break;case "LOAD_BY_ENTITY":this.onLoadByEntity=b;break;case "USER_ACTION":this.onUserAction=b;break;case "DISPLAY_STATUS":this.onDisplayStatus=b;break;case "CUSTOM_COMMAND":this.onCustomCommand=b;break;case "FOCUS_STATE":this.onFocusState=b;break;default:throw a="Cannot set handler for "+a,B(je,
a),Error(a);}};R.prototype.setMessageHandler=R.prototype.Oe;R.prototype.Ce=function(a,b){var c=this,d=this.L.Xb;if(d&&!0===d.display_supported)return Promise.resolve(new me("NOT_SUPPORTED"));d=ra();if(td(this.jb.O,d))return Promise.reject(Error("Duplicate request"));var e=new oe(a,b);e.requestId=d;return new Promise(function(a){c.jb.set(e.requestId,a);c.P.send("system-0",e)})};R.prototype.playString=R.prototype.Ce;
R.prototype.be=function(a){var b=this,c=ra(),d=new pe(a);d.requestId=c;return new Promise(function(a){b.jb.set(d.requestId,a);b.P.send("system-0",d)})};R.prototype.executeActionScript=R.prototype.be;ka(R);R.getInstance=R.ea;R.NAMESPACE="urn:x-cast:com.google.cast.cac";var je=z("cast.receiver.CommandAndControlManager");
R.MessageType={SET_CREDENTIALS:"SET_CREDENTIALS",LOAD_BY_ENTITY:"LOAD_BY_ENTITY",USER_ACTION:"USER_ACTION",DISPLAY_STATUS:"DISPLAY_STATUS",PLAY_STRING:"PLAY_STRING",EXECUTE_ACTION_SCRIPT:"EXECUTE_ACTION_SCRIPT",CUSTOM_COMMAND:"CUSTOM_COMMAND",FOCUS_STATE:"FOCUS_STATE",SUCCESS:"SUCCESS",ERROR:"ERROR"};R.PlayStringId={FREE_TRIAL_ABOUT_TO_EXPIRE:"FREE_TRIAL_ABOUT_TO_EXPIRE",SUBSCRIPTION_ABOUT_TO_EXPIRE:"SUBSCRIPTION_ABOUT_TO_EXPIRE",STREAM_HIJACKED:"STREAM_HIJACKED"};var qe=function(a){this.type=a};
R.RequestData=qe;var re=function(){this.type="SET_CREDENTIALS"};k(re,qe);R.SetCredentialsRequestData=re;var se=function(){this.type="LOAD_BY_ENTITY"};k(se,qe);R.LoadByEntityRequestData=se;var te=function(){this.type="CUSTOM_COMMAND"};k(te,qe);R.CustomCommandRequestData=te;var oe=function(a,b){this.type="PLAY_STRING";this.stringId=a;this.arguments=b};k(oe,qe);R.PlayStringRequestData=oe;var pe=function(a){this.type="EXECUTE_ACTION_SCRIPT";this.actionScript=JSON.stringify(a)};k(pe,qe);
R.ExecuteActionScriptRequestData=pe;R.ScriptAction=function(a,b){this.app_id=a;this.action=b;this.custom_data=void 0};R.UserAction={LIKE:"LIKE",DISLIKE:"DISLIKE",FOLLOW:"FOLLOW",UNFOLLOW:"UNFOLLOW",FLAG:"FLAG",SKIP_AD:"SKIP_AD"};R.UserActionContext={UNKNOWN_CONTEXT:"UNKNOWN_CONTEXT",TRACK:"TRACK",ALBUM:"ALBUM",ARTIST:"ARTIST",PLAYLIST:"PLAYLIST",EPISODE:"EPISODE",SERIES:"SERIES",MOVIE:"MOVIE",CHANNEL:"CHANNEL",TEAM:"TEAM",PLAYER:"PLAYER",COACH:"COACH"};var ue=function(){this.type="USER_ACTION"};
k(ue,qe);R.UserActionRequestData=ue;var ve=function(){this.type="DISPLAY_STATUS"};k(ve,qe);R.DisplayStatusRequestData=ve;var we=function(){this.type="FOCUS_STATE"};k(we,qe);R.FocusStateRequestData=we;R.FocusState={IN_FOCUS:"IN_FOCUS",NOT_IN_FOCUS:"NOT_IN_FOCUS"};
R.ErrorCode={APP_ERROR:"APP_ERROR",NOT_SUPPORTED:"NOT_SUPPORTED",AUTHENTICATION_EXPIRED:"AUTHENTICATION_EXPIRED",PREMIUM_ACCOUNT_REQUIRED:"PREMIUM_ACCOUNT_REQUIRED",CONCURRENT_STREAM_LIMIT:"CONCURRENT_STREAM_LIMIT",PARENTAL_CONTROL_RESTRICTED:"PARENTAL_CONTROL_RESTRICTED",NOT_AVAILABLE_IN_REGION:"NOT_AVAILABLE_IN_REGION",CONTENT_ALREADY_PLAYING:"CONTENT_ALREADY_PLAYING",INVALID_COMMAND:"INVALID_COMMAND",INVALID_REQUEST:"INVALID_REQUEST",GENERIC_LOAD_ERROR:"GENERIC_LOAD_ERROR"};
var xe=function(a){this.type=a};k(xe,qe);R.ResponseData=xe;var ye=function(a){this.type="SUCCESS";this.status=a};k(ye,xe);R.SuccessResponseData=ye;var me=function(a,b){this.type="ERROR";this.code=a;this.reason=b};k(me,xe);R.ErrorResponseData=me;var ze=!(!cast.__platform__||!cast.__platform__.crypto);u("cast.receiver.cryptokeys.getKeyByName",cast.__platform__&&cast.__platform__.cryptokeys?cast.__platform__.cryptokeys.getKeyByName:window.cryptokeys&&window.cryptokeys.getKeyByName);u("cast.receiver.crypto.decrypt",ze?cast.__platform__.crypto.decrypt:window.crypto.subtle.decrypt);u("cast.receiver.crypto.encrypt",ze?cast.__platform__.crypto.encrypt:window.crypto.subtle.encrypt);u("cast.receiver.crypto.sign",ze?cast.__platform__.crypto.sign:window.crypto.subtle.sign);
u("cast.receiver.crypto.unwrapKey",ze?cast.__platform__.crypto.unwrapKey:window.crypto.subtle.unwrapKey);u("cast.receiver.crypto.verify",ze?cast.__platform__.crypto.verify:window.crypto.subtle.verify);u("cast.receiver.crypto.wrapKey",ze?cast.__platform__.crypto.wrapKey:window.crypto.subtle.wrapKey);var Ae=/#(.)(.)(.)(.)/,Ce=function(a){if(!Be.test(a))throw Error("'"+a+"' is not a valid alpha hex color");5==a.length&&(a=a.replace(Ae,"#$1$1$2$2$3$3$4$4"));a=a.toLowerCase();return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16),parseInt(a.substr(7,2),16)/255]},Be=/^#(?:[0-9a-f]{4}){1,2}$/i,De=function(a){var b=a.slice(0);b[3]=Math.round(1E3*a[3])/1E3;return"rgba("+b.join(",")+")"};var Ee=!eb&&!cb||cb&&9<=Number(nb)||eb&&mb("1.9.1");cb&&mb("9");var Fe=function(a,b,c){function d(c){c&&b.appendChild(ia(c)?a.createTextNode(c):c)}for(var e=1;e<c.length;e++){var f=c[e];if(!ma(f)||na(f)&&0<f.nodeType)d(f);else{a:{if(f&&"number"==typeof f.length){if(na(f)){var g="function"==typeof f.item||"string"==typeof f.item;break a}if(q(f)){g="function"==typeof f.item;break a}}g=!1}Ha(g?La(f):f,d)}}},Ge=function(a){this.ub=a||m.document||document};h=Ge.prototype;h.getElementsByTagName=function(a,b){return(b||this.ub).getElementsByTagName(String(a))};
h.createElement=function(a){return this.ub.createElement(String(a))};h.createTextNode=function(a){return this.ub.createTextNode(String(a))};h.appendChild=function(a,b){a.appendChild(b)};h.append=function(a,b){var c=a;v(c,"Node cannot be null or undefined.");Fe(9==c.nodeType?c:c.ownerDocument||c.document,a,arguments)};h.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
h.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};h.Bc=function(a){return Ee&&void 0!=a.children?a.children:Ia(a.childNodes,function(a){return 1==a.nodeType})};h.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};var Ke=function(a,b,c,d){F.call(this);this.c=a;this.tb=this.Nb=null;this.Ea=[];this.Wb=!1;this.Tb="cast-captions-"+Math.floor(1E6*Math.random()).toString();this.zd="["+this.Tb+'="true"]::cue ';this.Ad=new RegExp(/^[\.'":%,;\s\-0-9a-z]+$/i);a=l(b);for(b=a.next();!b.done;b=a.next()){b=b.value;var e=b.trackContentId;if("TEXT"==b.type&&e){var f=b.trackContentType;if(0==ya("vtt",e.substr(e.length-3,3))||n(f)&&0==ya(f,"text/vtt"))e=document.createElement("track"),e.src=b.trackContentId,e.id=b.trackId,e.label=
b.name,e.srclang=b.language,e.kind=(b.subtype||"CAPTIONS").toLowerCase(),this.Ea.push(e),this.c.appendChild(e)}}He(this);d&&Ie(this,d);Je(this,c)};k(Ke,F);Ke.prototype.da=function(){return"TextTracksManager"};
var Le=function(a,b){a=l(a.Ea);for(var c=a.next();!c.done;c=a.next()){var c=c.value,d=c.track;b(c)?d.mode="showing":(d.mode="showing",d.mode="disabled")}},Me=function(a){return a.Ea.map(function(a){return parseInt(a.id,10)})},Je=function(a,b){Le(a,function(a){return 0<=Fa(b,parseInt(a.id,10))})},Ne=function(a,b){Le(a,function(a){return ta(b,a.srclang)})},Oe=function(a){var b=[];a=l(a.Ea);for(var c=a.next();!c.done;c=a.next())c=c.value,"showing"==c.track.mode&&b.push(parseInt(c.id,10));return b},Pe=
function(a){a.tb&&(a.c.removeAttribute(a.Tb),document.head.removeChild(a.tb),a.Nb=null)},Qe=function(a){a.Wb&&(a.c.removeAttribute("crossorigin"),a.Wb=!1)},S=function(a,b,c){1==c||a.Ad.test(b)?a.Nb.insertRule(a.zd+"{ "+b+" }",a.Nb.cssRules.length):C(Re,"Invalid css cue: "+b)},He=function(a){Pe(a);Qe(a);var b=va||(va=new Ge),c=b.ub,d=b.createElement("STYLE");d.type="text/css";b.getElementsByTagName("HEAD")[0].appendChild(d);d.styleSheet?d.styleSheet.cssText="":d.appendChild(c.createTextNode(""));a.tb=
d;a.Nb=a.tb.sheet;S(a,"font-size: 4.1vh;");S(a,"font-family: monospace;");S(a,"font-style: normal;");S(a,"font-weight: normal;");S(a,"background-color: black;");S(a,"color: white;");a.c.setAttribute(a.Tb,!0);0<a.Ea.length&&!a.c.getAttribute("crossorigin")&&(a.c.setAttribute("crossorigin","anonymous"),a.Wb=!0)},Se=function(a,b){try{var c=De(Ce(a))}catch(d){C(Re,"Invalid color: "+a)}if(c)switch(a="rgba(204, 204, 204, "+parseInt(a.substring(7,9),16)+")",b){case "OUTLINE":return"text-shadow: 0 0 4px "+
c+", 0 0 4px "+c+", 0 0 4px "+c+", 0 0 4px "+c+";";case "DROP_SHADOW":return"text-shadow: 0px 2px 3px "+c+", 0px 2px 4px "+c+", 0px 2px 5px "+c+";";case "RAISED":return"text-shadow: 1px 1px "+c+", 2px 2px "+c+", 3px 3px "+c+";";case "DEPRESSED":return"text-shadow: 1px 1px "+a+", 0 1px "+a+", -1px -1px "+c+", 0 -1px "+c+";"}return""},Te=function(a){switch(a){case "BOLD":return"font-weight: bold;";case "BOLD_ITALIC":return"font-style: italic; font-weight: bold;";case "ITALIC":return"font-style: italic;"}return"font-style: normal;"},
Ie=function(a,b){if(n(b.foregroundColor))try{var c=De(Ce(b.foregroundColor));S(a,"color: "+c+";",!0)}catch(r){C(Re,"Invalid color: "+b.foregroundColor)}if(n(b.backgroundColor))try{var d=De(Ce(b.backgroundColor));S(a,"background-color: "+d+";",!0)}catch(r){C(Re,"Invalid color: "+b.backgroundColor)}n(b.fontScale)&&S(a,"font-size: "+100*b.fontScale+"%;");if(n(b.fontFamily)||n(b.fontGenericFamily)){var c=b.fontFamily,d=b.fontGenericFamily,e="font-family: ",f="";n(c)&&(e+='"'+c+'"',f=", ");if(n(d)){switch(d){case "SANS_SERIF":var g=
'"Droid Sans", sans-serif';break;case "MONOSPACED_SANS_SERIF":g='"Droid Sans Mono", monospace';break;case "SERIF":g='"Droid Serif", serif';break;case "MONOSPACED_SERIF":g='"Cutive Mono"';break;case "CASUAL":g='"Short Stack"';break;case "CURSIVE":g="Quintessential";break;case "SMALL_CAPITALS":g='"Alegreya Sans SC"'}e+=f+g}S(a,e+";")}n(b.fontStyle)&&S(a,Te(b.fontStyle));n(b.edgeType)&&(g=n(b.foregroundColor)?b.foregroundColor:"#FFFFFFFF",b=n(b.edgeColor)?Se(b.edgeColor,b.edgeType):Se(g,b.edgeType),
S(a,b,!0))};Ke.prototype.D=function(){F.prototype.D.call(this);for(var a=l(this.Ea),b=a.next();!b.done;b=a.next())this.c.removeChild(b.value);this.Ea.length=0;Pe(this);Qe(this);A(Re,y,"Disposed "+this.da())};var Re=z("cast.receiver.TextTracksManager");var Ue=function(a,b){this.I=a;this.c=b;this.ic=this.Yb=this.Zb=ja;this.La=0;this.ba=this.Wa=null;this.Xc=0;this.o=this.w=null;this.cb=!1;this.Bb=!0;I(this.c,"error",this.kc,!1,this);I(this.c,"ended",this.Hb,!1,this);I(this.c,"loadedmetadata",this.oc,!1,this);E(this.I,"Using default Player")};h=Ue.prototype;h.Uc=function(a,b,c,d){Ve(this);this.Bb=a;this.La=b;this.Xc=d||0;this.ba=c||null};h.kc=function(a){Ve(this);this.Zb(a)};h.Hb=function(){Ve(this);this.Yb()};
h.oc=function(){this.w&&this.o&&Je(this.w,this.o);this.ic()};h.registerErrorCallback=function(a){this.Zb=a};h.registerEndedCallback=function(a){this.Yb=a};h.registerLoadCallback=function(a){this.ic=a};h.unregisterErrorCallback=function(){this.Zb=ja};h.unregisterEndedCallback=function(){this.Yb=ja};h.unregisterLoadCallback=function(){this.ic=ja};
var We=function(a){var b=a.c.duration;if(isNaN(b)||null==a.ba)return b;if(null!=a.Wa)return a.Wa;a.Wa=0<=a.ba?Math.min(a.Xc+a.ba,b):Math.max(b+a.ba,a.La);return a.Wa},Ve=function(a){null!=a.ba&&(J(a.c,"timeupdate",a.Sc,!1,a),a.Wa=null,a.ba=null)};Ue.prototype.Sc=function(){Xe(this)};var Xe=function(a){if(null==a.ba)return!1;var b=We(a);return isNaN(b)?!1:a.c.currentTime>=b?(a.Hb(),!0):!1};h=Ue.prototype;
h.load=function(a,b,c,d,e,f){this.w&&(this.w.M(),this.w=null);this.cb=!1;d&&d.tracks&&this.c&&(this.w&&this.w.M(),this.w=new Ke(this.c,d.tracks,d.activeTrackIds||[],d.textTrackStyle||null),d.language&&Ne(this.w,d.language));null!=this.ba&&I(this.c,"timeupdate",this.Sc,!1,this);e||(this.La=c&&0<c?c:0,E(this.I,"Load - contentId: "+a+" autoplay: "+b+" time: "+this.La),this.c.autoplay=!1,a&&(this.c.src=a),this.c.autoplay=b,this.c.load(),n(f)&&(this.c.playbackRate=f))};
h.reset=function(){this.cb=!1;this.w&&(this.w.M(),this.w=null);this.o=null;this.c.removeAttribute("src");this.La=0;this.c.load();Ve(this)};h.play=function(){this.cb=!1;this.c.play()};h.seek=function(a,b){this.c.currentTime!=a&&(this.c.currentTime=a);Xe(this)||("PLAYBACK_START"==b&&this.c.paused?this.c.play():"PLAYBACK_PAUSE"!=b||this.c.paused||this.c.pause())};h.ld=function(a){return this.c.playbackRate=a};h.pause=function(){this.cb=!0;this.c.pause()};
h.getState=function(){null==this.Bb&&(this.Bb=this.c.autoplay);return this.c.paused||isNaN(this.c.duration)?this.c.duration&&(this.c.currentTime||0==this.c.currentTime)&&this.c.currentTime<We(this)?this.c.currentTime==this.La&&this.Bb&&!this.cb?"BUFFERING":"PAUSED":"IDLE":"PLAYING"};h.getCurrentTimeSec=function(){var a=We(this);return isNaN(a)?this.c.currentTime:this.c.currentTime<a?this.c.currentTime:a};h.getDurationSec=function(){return We(this)};
h.getVolume=function(){return{level:this.c.volume,muted:this.c.muted}};h.setVolume=function(a){n(a.level)&&(this.c.volume=a.level);n(a.muted)&&(this.c.muted=a.muted)};h.editTracksInfo=function(a){if(this.w){if(a.textTrackStyle){var b=this.w,c=a.textTrackStyle;He(b);Ie(b,c)}a.language?Ne(this.w,a.language):a.activeTrackIds&&Je(this.w,a.activeTrackIds)}Ye(this,a.activeTrackIds);return this.o};
var Ye=function(a,b){a.o=b?b.slice(0):a.o;a.o=a.o||[];if(a.w){var c=Me(a.w);a.o=a.o.filter(function(a){return!c.includes(a)}).concat(Oe(a.w))}0==a.o.length&&(a.o=null)};var Ze=function(a){F.call(this);this.Za=a;this.m={}};sa(Ze,F);var $e=[];h=Ze.prototype;h.Na=function(a,b,c,d){"array"!=la(b)&&(b&&($e[0]=b.toString()),b=$e);for(var e=0;e<b.length;e++){var f=I(a,b[e],c||this.handleEvent,d||!1,this.Za||this);if(!f)break;this.m[f.key]=f}return this};
h.mb=function(a,b,c,d,e){if("array"==la(b))for(var f=0;f<b.length;f++)this.mb(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.Za||this,c=Wb(c),d=!!d,b=Mb(a)?a.Ya(b,c,d,e):a?(a=Xb(a))?a.Ya(b,c,d,e):null:null,b&&(ac(b),delete this.m[b.key]);return this};h.tc=function(){Ra(this.m,function(a,b){this.m.hasOwnProperty(b)&&ac(a)},this);this.m={}};h.D=function(){Ze.Sa.D.call(this);this.tc()};h.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var af={cf:"persistent-release-message"},bf=new Uint8Array([43,248,102,128,198,229,78,36,190,35,15,129,90,96,110,178]),T=function(a,b){this.h=new K;this.te=b;this.N=a.createSession("persistent-license");this.sessionId="";this.expiration=this.N.expiration;this.closed=this.N.closed;this.keyStatuses=this.N.keyStatuses;this.Za=new Ze(this);Gb(this.h,qa(Hb,this.Za))};u("cast.receiver.eme.KeySession",T);
T.createSession=function(a,b){a:{for(var c in af)if(af[c]==b)break a;throw Error("Unknown key session type: "+b);}a=new T(a,b);a.Za.Na(a.N,"message",a.ad).Na(a.N,"keystatuseschange",a.ad);return a};
T.prototype.generateRequest=function(a,b){if("persistent-release-message"==this.te){if("cenc"!=a)throw Error("Only cenc initDataType is supported for persistent-release-message session type.");var c=new Uint8Array([0,0,0,0,112,115,115,104,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2]);c.set(bf,12);(new DataView(c.buffer)).setUint32(0,c.length);var d=new Uint8Array(b.byteLength+c.byteLength);d.set(new Uint8Array(b),0);d.set(c,b.byteLength);b=d}return this.N.generateRequest(a,b).then(t(function(){this.sessionId=
this.N.sessionId},this))};T.prototype.generateRequest=T.prototype.generateRequest;T.prototype.load=function(a){return this.N.load(a)};T.prototype.load=T.prototype.load;T.prototype.update=function(a){return this.N.update(a)};T.prototype.update=T.prototype.update;T.prototype.close=function(){this.h.M();return this.N.close()};T.prototype.close=T.prototype.close;T.prototype.remove=function(){return this.N.remove()};T.prototype.remove=T.prototype.remove;
T.prototype.ad=function(a){var b=new G(a.type);Ya(b,a.Ia);b.target=this;this.h.dispatchEvent(b)};T.prototype.addEventListener=function(a,b){I(this.h,a,b)};T.prototype.addEventListener=T.prototype.addEventListener;T.prototype.removeEventListener=function(a,b){J(this.h,a,b)};T.prototype.removeEventListener=T.prototype.removeEventListener;T.prototype.dispatchEvent=function(a){a.target=this;return this.h.dispatchEvent(a)};T.prototype.dispatchEvent=T.prototype.dispatchEvent;var cf=z("cast");u("cast.receiver.logger",cf);u("cast.receiver.LoggerLevel",{DEBUG:0,VERBOSE:500,INFO:800,WARNING:900,ERROR:1E3,NONE:1500});cf.jd=function(a){cf&&cf.vc(Ab(a))};cf.setLevelValue=cf.jd;if(cf){var df=1E3;if(document.currentScript){var ef=document.currentScript.src;if(ef.includes("/df/cast/sdk/")||ef.includes("/staging/cast/sdk/"))df=800}var ff=parseInt(Uc("log-level-cast-receiver"),10);cf.jd(ff||df)};var gf=function(){this.V=[];this.Z=[]};gf.prototype.enqueue=function(a){this.Z.push(a)};var hf=function(a){0==a.V.length&&(a.V=a.Z,a.V.reverse(),a.Z=[]);return a.V.pop()};h=gf.prototype;h.fc=function(){return 0==this.V.length&&0==this.Z.length};h.clear=function(){this.V=[];this.Z=[]};h.contains=function(a){return 0<=Fa(this.V,a)||0<=Fa(this.Z,a)};h.remove=function(a){var b=this.V;var c=Ga(b,a);0<=c?(Ja(b,c),b=!0):b=!1;return b||Ka(this.Z,a)};
h.Dc=function(){for(var a=[],b=this.V.length-1;0<=b;--b)a.push(this.V[b]);for(var c=this.Z.length,b=0;b<c;++b)a.push(this.Z[b]);return a};var U=function(){};u("cast.receiver.QueueBase",U);U.prototype.load=function(){return Promise.reject("Not implemented")};U.prototype.load=U.prototype.load;U.prototype.oa=function(){return null};U.prototype.getCurrentItem=U.prototype.oa;U.prototype.gd=function(){return Promise.reject("Not implemented")};U.prototype.setCurrentItemById=U.prototype.gd;U.prototype.Oc=function(){return Promise.reject("Not implemented")};U.prototype.nextItems=U.prototype.Oc;U.prototype.Vc=function(){return Promise.reject("Not implemented")};
U.prototype.prevItems=U.prototype.Vc;U.prototype.Ja=function(){return Promise.reject("Not implemented")};U.prototype.fetchItems=U.prototype.Ja;U.prototype.ie=function(){return-1};U.prototype.getMaxNumItems=U.prototype.ie;U.prototype.Re=function(){};U.prototype.setUpdateCallback=U.prototype.Re;var jf=function(a){this.itemId=a;this.customData=this.activeTrackIds=this.preloadTime=this.playbackDuration=this.startTime=this.autoplay=this.media=void 0};u("cast.receiver.media.QueueItem",jf);jf.prototype.clone=function(a){var b=new jf(this.itemId);b.autoplay=this.autoplay;b.startTime=this.startTime;b.playbackDuration=this.playbackDuration;b.preloadTime=this.preloadTime;b.activeTrackIds=this.activeTrackIds;b.customData=this.customData;if(!n(a)||a)b.media=this.media;return b};
var V=function(a){this.a=void 0;this.K="REPEAT_OFF";this.wc=this.j=0;this.Wc=this.b=void 0;this.Fc=a;this.kb=1};u("cast.receiver.MediaQueue",V);
var lf=function(a,b){if(b.queueData){var c=b.queueData;if(a.b)return Promise.resolve(a.b.load(b)).then(function(b){kf(a,b,!0)});if(c.items){kf(a,c);return}}c=new jf(a.Fc());c.media=b.media;c.autoplay=b.autoplay;c.activeTrackIds=b.activeTrackIds;c.customData=b.customData;a.a=[c]},kf=function(a,b,c){mf(a,b,void 0===c?!1:c)||C(nf,"The passed in queueData is not completely valid: "+b);a.Wc=b;a.a=b.items;a.K=b.repeatMode||a.K;a.j=b.startIndex||0;a.wc=b.startTime||0};
V.prototype.Ja=function(a,b,c,d){var e=this,f=void 0,g=of(this,b);this.b?0<c&&0<d?f="Queue operations only support expanding the front or back.":0>g&&(f="Reference item id is not in current queue."):f="Fetch items is only supported with an external queue.";if(f)return C(nf,f),Promise.reject(f);0<c?(f=this.a.length-1,c-=f-g,b=Da(this.a[f].itemId)):0<d&&(d-=g,b=Da(this.a[0].itemId));var r=new Id;r.requestId=a;return 0>=c&&0>=d?(r.changeType="NO_CHANGE",r.sequenceNumber=this.kb-1,Promise.resolve(r)):
Promise.resolve(this.b.Ja(b,c,d)).then(function(a){if(a&&0!=a.length){var d=0<c?void 0:b;pf(e,a,d);r.changeType="INSERT";r.itemIds=a.map(function(a){return a.itemId});r.insertBefore=d;r.sequenceNumber=e.kb++}else r.changeType="NO_CHANGE",r.sequenceNumber=e.kb-1;return r})};
var qf=function(a,b,c){var d=new Jd;d.requestId=b;d.items=[];if(a.a)for(b=l(c),c=b.next();!c.done;c=b.next()){c=c.value;for(var e=l(a.a),f=e.next();!f.done;f=e.next())if(f=f.value,f.itemId==c){d.items.push(f);break}C(nf,"Unknown item id: "+c)}return d},rf=function(a,b){var c=new Kd;c.requestId=b;c.ids=a.dc().map(function(a){return a.itemId});return c},sf=function(a,b){return new Promise(function(c,d){var e=void 0,f=a.cc();Da(f);1==b?e=a.b.Oc.bind(a.b):-1==b?e=a.b.Vc.bind(a.b):1<b?e=a.b.Ja.bind(a.b,
f,b,0):-1>b?e=a.b.Ja.bind(a.b,f,0,-b):d("Should not be requesting more items on the current item");Promise.resolve(e()).then(function(e){0<e.length?(pf(a,e,0<=b?void 0:a.cc()),c()):d("No more items from the queue.")},function(){return d("Failed to get more items from the queue.")})})};V.prototype.clear=function(){this.a=void 0;this.K="REPEAT_OFF";this.wc=this.j=0};V.prototype.dc=function(a){if(!n(a)||a)return v(this.a),this.a;for(var b=[],c=0;c<this.a.length;c++)b.push(this.a[c].clone(a));return b};
V.prototype.getItems=V.prototype.dc;V.prototype.he=function(){return this.a.length};V.prototype.getLength=V.prototype.he;V.prototype.me=function(){return this.K};V.prototype.getRepeatMode=V.prototype.me;V.prototype.cc=function(){if(!(0>this.j)){var a=this.a[this.j].itemId;Da(a);return a}};V.prototype.getCurrentItemId=V.prototype.cc;V.prototype.oa=function(){return!this.a||0>this.j?null:this.a[this.j]};V.prototype.getCurrentItem=V.prototype.oa;
var tf=function(a,b){for(var c=[],d=0;d<b.length;d++)for(var e=0;e<a.a.length;e++)if(b[d]==a.a[e].itemId){c.push(b[d]);break}return c},uf=function(a){return"REPEAT_ALL_AND_SHUFFLE"==a.K},of=function(a,b){for(var c=0;c<a.a.length;c++)if(b==a.a[c].itemId)return c;return-1},vf=function(a){return"REPEAT_ALL_AND_SHUFFLE"==a.K||"REPEAT_ALL"==a.K};V.prototype.reset=function(){this.j=-1};
var xf=function(a,b){b=of(a,b);if(-1==b||a.j==b)return!1;wf(a,b);return!0},pf=function(a,b,c,d){v(a.a);c=p(c)?of(a,c):a.a.length;c=-1==c?a.a.length:c;qa(Na,a.a,c,0).apply(null,b);n(d)?a.j=c+d:a.j>=c&&(a.j+=b.length)},yf=function(a,b){return a.b?(b&&C(nf,b+" not supported when external queue is provided."),!0):!1},Af=function(a,b,c){if(0>a.j)return"QUEUE_ENDED";b=a.j+b;var d=!1;b>=a.a.length?(b=vf(a)?b%a.a.length:-1,d=!0):0>b&&(b=vf(a)?a.a.length+(b+1)%a.a.length-1:0,d=!0);c&&wf(a,b);return-1==b?"QUEUE_ENDED":
d?uf(a)?(zf(a),"QUEUE_SHUFFLED"):"QUEUE_LOOP":"QUEUE_ACTIVE"},zf=function(a){var b=a.a.length;if(!(3>a.a.length))for(;0<b;){var c=Math.floor(Math.random()*b);--b;var d=a.a[c];a.a[c]=a.a[b];a.a[b]=d}},mf=function(a,b,c){c=void 0===c?!1:c;if(n(b.startIndex)&&(!p(b.startIndex)||0>b.startIndex))return B(nf,"Invalid startIndex "+b.startIndex),!1;var d=(b.startIndex||0)+1;if(!b.items||b.items.length<d)return B(nf,"Invalid number of items"),!1;if(b.repeatMode&&!Ld(b.repeatMode))return B(nf,"Invalid repeatMode"),
!1;for(d=0;d<b.items.length;d++)if(b.items[d].media){if(!c&&n(b.items[d].itemId))return B(nf,"ItemId should not be defined, element at index: "+d),!1;b.items[d].itemId=p(b.items[d].itemId)?b.items[d].itemId:a.Fc()}else return B(nf,"Media is mandatory, missing in element at index: "+d),!1;return!0},wf=function(a,b){a.j=b;a.b&&0<=b&&b<a.a.length&&Promise.resolve(a.b.gd(Da(a.a[b].itemId))).catch(function(){E(nf,"External queue did not implement setCurrentItemById.")})},nf=z("cast.receiver.MediaQueue");var Bf=function(a){var b=this;this.Pc=a;this.s=null;this.Ec="sdr";this.Zc=function(){b.Pc()}},Cf=function(a){return a.s?a.s.videoWidth:0},Df=function(a){return a.s?a.s.videoHeight:0};var W=function(a,b,c){var d=this,e=O.ea();ge.ea();this.ta=c||"local";this.W=e.Ka("urn:x-cast:com.google.cast.media","JSON");this.ha=0;this.gb=this.ra=null;this.Jb=1;this.We=b||15;this.od=this.Kc=this.Ma=this.qa=this.i=this.g=null;this.ga=!1;this.o=this.fa=this.u=null;this.Cb=!0;this.Ta=null;this.Sb=this.wd.bind(this);this.b=new V(this.Ac.bind(this));this.nb=!1;this.ya=null;this.ye=1;this.Mb=-1;this.Eb=new gf;this.ab=!1;this.customizedStatusCallback=this.Bd;this.customizedCloudStatusCallback=null;
this.onLoad=this.Md;this.onPlay=this.Qd;this.onPlayAgain=this.Pd;this.onSeek=this.Wd;this.onSetPlaybackRate=this.Xd;this.onPause=this.Od;this.onStop=this.Zd;this.onSetVolume=this.Yd;this.onEditTracksInfo=this.Ed;this.onEditAudioTracks=this.Dd;this.onQueueLoad=this.Td;this.onQueueInsert=this.Sd;this.onQueueUpdate=this.zc;this.onQueueRemove=this.Ud;this.onQueueReorder=this.Vd;this.onMetadataLoaded=this.Nd;this.onLoadMetadataError=this.Ld;this.onEnded=this.Fd;this.onQueueEnded=this.Rd;this.onAbort=ja;
this.onError=this.Gd;this.onMediaStatus=this.onLocalRequestError=ja;this.onPreload=this.onPrecache=null;this.onFetchItems=this.Hd;this.onGetItemsInfo=this.Id;this.onGetQueueIds=this.Jd;this.onCancelPreload=null;this.onGetStatus=this.Kd;this.pb=new Bf(this.l.bind(this,!1));e.mc=function(a){var b=d.pb;b.Ec=a;b.Pc()};this.h=new K;this.kd(a);this.W.onMessage=this.nc.bind(this);this.Ta=Mc(this.Sb,1E3)};u("cast.receiver.MediaManager",W);W.prototype.da=function(){return"MediaManager"};W.prototype.Ac=function(){return this.ye++};
W.prototype.je=function(){return this.i?this.i.media||null:null};W.prototype.getMediaInformation=W.prototype.je;W.prototype.ke=function(){return n(this.b.a)?this.b:null};W.prototype.getMediaQueue=W.prototype.ke;W.prototype.se=function(a,b,c,d,e){a=new Ef(a);a.insertBefore=null!=b?b:void 0;a.currentItemIndex=null!=c?c:void 0;a.currentItemId=null!=d?d:void 0;a.currentTime=null!=e?e:void 0;a.type="QUEUE_INSERT";Ff(this,this.ta,a)};W.prototype.insertQueueItems=W.prototype.se;
W.prototype.Ge=function(a,b,c){a=new Gf(a);a.currentItemId=null!=b?b:void 0;a.currentTime=null!=c?c:void 0;a.type="QUEUE_REMOVE";Ff(this,this.ta,a)};W.prototype.removeQueueItems=W.prototype.Ge;W.prototype.Ne=function(a,b,c){b=!n(b)||b;if(c&&!b)throw Error("No broadcast call but status customData has been provided");this.i&&(this.i.media=a);b&&this.l(!0,null,c)};W.prototype.setMediaInformation=W.prototype.Ne;
var Hf=function(a){for(var b=0;b<a.length;b++)if(!n(a[b].trackId)||!n(a[b].type))return!1;return!0},If=function(a,b){if(!b)return!0;if(!a)return!1;a=l(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,"TEXT"==c.type&&n(c.language)&&ta(c.language,b))return!0;return!1},Jf=function(a,b){if(!b)return!0;if(!a)return!1;a=l(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,"AUDIO"==c.type&&n(c.language)&&ta(c.language,b))return!0;return!1},Kf=function(a,b){if(!b||0==b.length)return!0;if(!a||b.length>
a.length)return B(X,"Too many track IDs"),!1;for(var c=0,d=0,e=0;e<b.length;e++){for(var f=!1,g=0;g<a.length;g++)if(b[e]==a[g].trackId){f=!0;break}if(!f)return B(X,"Track ID does not exist: "+b[e]),!1;"AUDIO"==a[g].type?d++:"VIDEO"==a[g].type&&c++;if(1<d||1<c)return B(X,"Maximum one active video and one active audio track supported"),!1}return!0},Ff=function(a,b,c){c.mediaSessionId=a.ha;a.nc(new dd("message",b,c))};
W.prototype.nc=function(a){var b=a.data,c=b.type;if(!this.ab||this.Eb.fc()&&"LOAD"==c){a=a.senderId;var d=b.type;var e=b.requestId;if(p(e)&&e==Math.floor(e)){var f=!1;void 0!=b.mediaSessionId&&b.mediaSessionId!=this.ha?(B(X,"Invalid media session ID: "+b.mediaSessionId+"  does not match the expected ID: "+this.ha),f=!0):"LOAD"!=d&&"PLAY_AGAIN"!=d&&"GET_STATUS"!=d&&"QUEUE_LOAD"!=d&&"PRECACHE"!=d&&(n(b.mediaSessionId)?"IDLE"==Lf(this)&&(B(X,"Unexpected command, player is in IDLE state so the media session ID is not valid yet"),
f=!0):(B(X,"Invalid media session ID, it is undefined"),f=!0));f?(this.ka(a,e,"INVALID_REQUEST","INVALID_MEDIA_SESSION_ID"),d=!1):(A(X,y,"MediaManager message received"),d=!0)}else B(X,"Ignoring request, requestId is not an integer: "+e),d=!1;if(d){d=b.requestId;delete b.type;e=null;switch(c){case "LOAD":this.nb=!1;e=Mf(this,a,b,!0);break;case "GET_STATUS":E(X,"Dispatching MediaManager getStatus event");b=new Y("getstatus",b,a);if(this.onGetStatus)this.onGetStatus(b);this.f(b);e=null;break;case "PLAY":E(X,
"Dispatching MediaManager play event");b=new Y("play",b,a);if(this.onPlay)this.onPlay(b);this.f(b);e=null;break;case "PLAY_AGAIN":E(X,"Dispatching MediaManager play again event");b=new Y("playagain",b,a);if(this.onPlayAgain)this.onPlayAgain(b);this.f(b);e=null;break;case "SEEK":if(n(b.currentTime)||n(b.relativeTime)){E(X,"Dispatching MediaManager seek event");b=new Y("seek",b,a);if(this.onSeek)this.onSeek(b);this.f(b);e=null}else B(X,"currentTime or relativeTime is required"),e={type:"INVALID_REQUEST",
reason:"INVALID_PARAMS"};break;case "SET_PLAYBACK_RATE":if(!p(b.playbackRate)||.5>b.playbackRate||2<b.playbackRate)B(X,"Bad value for playback rate "+b.playbackRate),e={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};else{E(X,"Dispatching MediaManager playback rate event");b=new Y("setplaybackrate",b,a);if(this.onSetPlaybackRate)this.onSetPlaybackRate(b);this.f(b);e=null}break;case "STOP":E(X,"Dispatching MediaManager stop event");b=new Y("stop",b,a);if(this.onStop)this.onStop(b);this.f(b);e=null;
break;case "PAUSE":E(X,"Dispatching MediaManager pause event");b=new Y("pause",b,a);if(this.onPause)this.onPause(b);this.f(b);e=null;break;case "SET_VOLUME":if(b.volume&&(n(b.volume.level)||n(b.volume.muted)))if(void 0!=b.volume.level&&0>b.volume.level||1<b.volume.level)B(X,"volume level is invalid"),e={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};else{E(X,"Dispatching MediaManager setvolume event");b=new Y("setvolume",b,a);if(this.onSetVolume)this.onSetVolume(b);this.f(b);e=null}else B(X,"volume is invalid"),
e={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};break;case "EDIT_TRACKS_INFO":E(X,"Dispatching MediaManager editTracksInfo event");if(Kf(this.i.media.tracks,b.activeTrackIds)){e=new Y("edittracksinfo",b,a);b.textTrackStyle&&(this.i.media.textTrackStyle=b.textTrackStyle);b.activeTrackIds&&(this.o=b.activeTrackIds);if(this.onEditTracksInfo)this.onEditTracksInfo(e);this.f(e);e=null}else B(X,"Invalid track info"),e={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};break;case "EDIT_AUDIO_TRACKS":E(X,
"Dispatching MediaManager editAudioTracks event");b=new Y("editaudiotracks",b,a);if(this.onEditAudioTracks)this.onEditAudioTracks(b);this.f(b);e=null;break;case "QUEUE_LOAD":this.nb=!0;E(X,"Dispatching MediaManager queueLoad event");if(mf(this.b,b)){b.items=Nf(b.items);b=new Y("queueload",b,a);if(this.onQueueLoad)this.onQueueLoad(b);this.f(b);e=null}else e={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};break;case "QUEUE_INSERT":this.nb=!0;E(X,"Dispatching MediaManager queueInsert event");e=!1;if(n(this.b.a))if(b.items&&
0!=b.items.length)if(n(b.currentItemId)&&n(b.currentItemIndex))B(X,"Maximum one currentItem must be provided"),e=!0;else if(n(b.currentItemIndex)&&(!p(b.currentItemIndex)||0>b.currentItemIndex||b.currentItemIndex>=b.items.length))B(X,"Invalid currentItemIndex"),e=!0;else if(n(b.currentItemId)&&(!p(b.currentItemId)||0>b.currentItemId))B(X,"Invalid currentItemId"),e=!0;else for(c=0;c<b.items.length;c++)if(p(b.items[c].itemId)){B(X,"Item contains an itemId at index: "+c);e=!0;break}else b.items[c].itemId=
this.Ac();else B(X,"No items to insert"),e=!0;else B(X,"Queue does not exist"),e=!0;if(e)e={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};else{b.items=Nf(b.items);b=new Y("queueinsert",b,a);if(this.onQueueInsert)this.onQueueInsert(b);this.f(b);e=null}break;case "QUEUE_UPDATE":e=Of(this,a,b);break;case "QUEUE_REMOVE":E(X,"Dispatching MediaManager queueRemove event");e=!1;n(this.b.a)?b.itemIds&&0!=b.itemIds.length?Pf(b.itemIds)||(e=!0):(B(X,"No itemIds to remove"),e=!0):(B(X,"Queue does not exist"),
e=!0);if(e)e={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};else{b.itemIds&&(b.itemIds=tf(this.b,b.itemIds));b=new Y("queueremove",b,a);if(this.onQueueRemove)this.onQueueRemove(b);this.f(b);e=null}break;case "QUEUE_REORDER":E(X,"Dispatching MediaManager queueReorder event");e=!1;n(this.b.a)?b.itemIds&&0!=b.itemIds.length?Pf(b.itemIds)?n(b.insertBefore)&&0<=Fa(b.itemIds,b.insertBefore)&&(B(X,"insertBefore can not be one of the reordered items"),e=!0):e=!0:(B(X,"No itemIds to reorder"),e=!0):(B(X,
"Queue does not exist"),e=!0);if(e)e={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};else{b.itemIds&&(b.itemIds=tf(this.b,b.itemIds));b=new Y("queuereorder",b,a);if(this.onQueueReorder)this.onQueueReorder(b);this.f(b);e=null}break;case "PRECACHE":b=new Y("precache",b,"__broadcast__");if(this.onPrecache)this.onPrecache(b);this.f(b);break;case "NEXT":b=new Qf;b.jump=1;Of(this,a,b);break;case "PREVIOUS":b=new Qf;b.jump=-1;Of(this,a,b);break;case "FETCH_ITEMS":b=new Y("fetchitems",b,a);if(this.onFetchItems)this.onFetchItems(b);
this.f(b);break;case "GET_ITEMS_INFO":b=new Y("getitemsinfo",b,a);if(this.onGetItemsInfo)this.onGetItemsInfo(b);this.f(b);break;case "GET_QUEUE_IDS":b=new Y("getqueueids",b,a);if(this.onGetQueueIds)this.onGetQueueIds(b);this.f(b);break;default:B(X,"Unexpected message type: "+c),e={type:"INVALID_REQUEST",reason:"INVALID_COMMAND"}}Rf(this,e,a,d)}}else this.Eb.enqueue(a)};
var Rf=function(a,b,c,d){b&&(B(X,"Sending error: "+b.type+" "+b.reason),a.onLocalRequestError&&c==a.ta?(b.requestId=d,a.onLocalRequestError(b)):a.ka(c,d,b.type,b.reason))},Lf=function(a){if(!a.i)return"IDLE";var b=a.g.getState();return"PLAYING"==b&&a.ga?"BUFFERING":b},Tf=function(a,b,c,d){var e={type:"MEDIA_STATUS"},f=a.u&&a.u.message.media||null;if(!a.i&&!a.qa&&!f)return e.status=[],e;var g={mediaSessionId:a.ha,playbackRate:a.Jb,playerState:Lf(a),currentTime:a.g.getCurrentTimeSec(),supportedMediaCommands:a.We,
volume:a.g.getVolume()};a.o&&(g.activeTrackIds=a.o);a.ya&&(g.preloadedItemId=a.ya);var r=Cf(a.pb),H=Df(a.pb);0<r&&0<H&&(g.videoInfo=new Dd(r,H,a.pb.Ec));if(a.i)b&&(g.media=a.i.media||void 0,r=a.b.Wc)&&(g.queueData=Va(r),g.queueData.items=void 0),g.currentItemId=a.i.itemId;else if(a.qa&&(b&&(g.media=a.qa.media||void 0),g.currentItemId=a.qa.itemId,a.qa=null),n(a.b.a)&&(r=a.b.oa()))g.loadingItemId=r.itemId;"IDLE"==g.playerState?(a.fa&&(g.idleReason=a.fa),f&&(g.extendedStatus=new Fd("LOADING",f))):a.fa=
null;void 0!=c&&(g.customData=c);n(a.b.a)&&(d&&(g.items=a.b.dc(b)),g.repeatMode=a.b.K);if(a.customizedStatusCallback)return b=function(a){a?e.status=[a]:e=null;return e},a=a.customizedStatusCallback(g),Sf(a)?a.then(b):b(a);e.status=[g];return e},Uf=function(a){null!=a.gb&&(m.clearTimeout(a.gb),a.gb=null)},Vf=function(a){var b=a.g.getCurrentTimeSec();a.Ma=b;a.Kc=b;a.od=Date.now();null!=a.Ta&&m.clearTimeout(a.Ta);a.Ta=Mc(a.Sb,1E3)};
W.prototype.wd=function(){this.Ta=Mc(this.Sb,1E3);var a=Lf(this);if("IDLE"!=a&&"PAUSED"!=a){a=this.Ma;this.Ma=this.g.getCurrentTimeSec();var b=this.ga;this.ga=100>1E3*(this.Ma-a);b!=this.ga?(A(X,y,"Buffering state changed, isPlayerBuffering: "+this.ga+" old time: "+a+" current time: "+this.Ma),this.l(!1)):this.ga||(a=1E3*(this.Ma-this.Kc)-this.Jb*(Date.now()-this.od),1E3<a||-1E3>a?(A(X,y,"Time drifted: "+a),this.l(!1)):this.i&&n(this.b.a)&&(a=this.b,(a=0>a.j?null:"REPEAT_SINGLE"==a.K?a.a[a.j]:a.j+
1>=a.a.length&&(uf(a)||"REPEAT_OFF"==a.K)?null:a.a[(a.j+1)%a.a.length])&&p(a.preloadTime)&&this.i.media&&!this.u&&Wf(this,a.preloadTime)&&this.ya!=a.itemId&&(this.onPreload?(Da(a.itemId),b=new Xf(a.itemId),b.requestId=0,b.mediaSessionId=this.ha,b.autoplay=a.autoplay,b.currentTime=a.startTime,b.customData=a.customData||void 0,b.activeTrackIds=a.activeTrackIds,b.media=a.media,b=new Y("preload",b,""),Da(a.itemId),this.ya=a.itemId,E(X,"Sending preload event: "+JSON.stringify(b)),this.onPreload(b)&&this.l(!1)):
E(X,"Not sending preload event"))))}};W.prototype.l=function(a,b,c,d){var e=this;if(this.g){A(X,y,"Sending broadcast status message");var f=function(a){if(null!=a){if(e.onMediaStatus&&a.status)e.onMediaStatus(a.status[0]||null);a.requestId=b||0;e.W.Rb(a);Vf(e);Yf(e,a)}};a=Tf(this,a,c,d);Sf(a)?a.then(f):f(a)}else B(X,"Not sending broadcast status message, state is invalid")};W.prototype.broadcastStatus=W.prototype.l;W.prototype.Le=function(a){A(X,y,"Setting IDLE reason: "+a);this.fa=a};
W.prototype.setIdleReason=W.prototype.Le;W.prototype.ka=function(a,b,c,d,e){E(X,"Sending error message to "+a);var f={};f.requestId=b;f.type=c;d&&(f.reason=d);e&&(f.customData=e);this.W.send(a,f)};W.prototype.sendError=W.prototype.ka;
W.prototype.fd=function(a,b,c,d,e){var f=this;if(this.g){A(X,y,"Sending status message to "+a);var g=function(c){if(null!=c){if(f.onMediaStatus&&c.status)f.onMediaStatus(c.status[0]||null);c.requestId=b;f.W.send(a,c);Vf(f)}};c=Tf(this,c,d,e);Sf(c)?c.then(g):g(c)}else B(X,"State is invalid"),this.ka(a,b,"INVALID_PLAYER_STATE",null,d)};W.prototype.sendStatus=W.prototype.fd;
var Yf=function(a,b){if(a.customizedCloudStatusCallback){b=Wa(b);b.type="CLOUD_STATUS";try{b=a.customizedCloudStatusCallback(b)}catch(c){B(X,"Cloud status handler failed. "+c);return}Sf(b)?b.then(function(b){a.W.send("__cloud__",b)}):a.W.send("__cloud__",b)}};W.prototype.Bd=function(a){return a};var Zf=function(a){a.u=null;if(a.ab)for(a.ab=!1;!a.Eb.fc()&&!a.ab;)a.nc(hf(a.Eb))};W.prototype.load=function(a){a.type="LOAD";Ff(this,this.ta,a)};W.prototype.load=W.prototype.load;
W.prototype.Fe=function(a){a.type="QUEUE_LOAD";Ff(this,this.ta,a)};W.prototype.queueLoad=W.prototype.Fe;
var Mf=function(a,b,c,d,e){E(X,"Dispatching MediaManager load event");E(X,"Load message received:"+JSON.stringify(c));var f=!1,g=e;c.media?c.media.tracks&&!Hf(c.media.tracks)?(B(X,"Invalid tracks information"),f=!0):c.activeTrackIds&&!Kf(c.media.tracks,c.activeTrackIds)&&(f=!0):(B(X,"Media is mandatory"),f=!0);e=c.playbackRate;if(n(e)&&(!p(e)||.5>e||2<e))return B(X,"Bad value for playback rate "+e),{type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};if(f)return g&&g(),{type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};
a.u?a.uc("LOAD_CANCELLED"):a.i&&(a.Ba("INTERRUPTED",!1),g=a.l.bind(a,!0));a.u={senderId:b,message:c};g&&g();a.o=c.activeTrackIds||null;a.ab=!0;f=function(){var d=g;a.i=a.b.oa();Uf(a);a.ra=c;if(a.Cb&&a.g.Uc){var e=a.b.wc;a.g.Uc(n(c.autoplay)?c.autoplay:!0,0<c.currentTime?c.currentTime:0<e?e:0,a.i.playbackDuration,a.i.startTime)}e=new Y("load",c,b);if(a.onLoad)a.onLoad(e);a.f(e);d||a.l(!0);a.ya=null};if(d&&(a.ha++,a.fa=null,a.nb=n(c.queueData),d=lf(a.b,c),Sf(d)))return d.then(f),null;f();return null};
W.prototype.Md=function(a){a=a.data;if(a.media&&a.media.contentId){var b=n(a.autoplay)?a.autoplay:!0;this.Jb=a.playbackRate?a.playbackRate:1;a.media.tracks?this.g.load(a.media.contentId,b,a.currentTime,{tracks:a.media.tracks,activeTrackIds:a.activeTrackIds,textTrackStyle:a.media.textTrackStyle},void 0,a.playbackRate):this.g.load(a.media.contentId,b,a.currentTime,void 0,void 0,a.playbackRate)}};
W.prototype.xe=function(a){if(!this.u)return!1;a.tracks=a.tracks||void 0;if(a.tracks&&!Hf(a.tracks))return B(X,"Invalid tracks information"),!1;if(a.activeTrackIds&&!Kf(a.tracks,a.activeTrackIds))return B(X,"Invalid active tracks"),!1;this.o=a.activeTrackIds||null;var b=this.b.oa();b&&b.media&&(b.media.tracks=a.tracks,b.media.textTrackStyle=a.textTrackStyle||void 0);this.g.load("",!1,void 0,a,!0);return!0};W.prototype.loadTracksInfo=W.prototype.xe;
W.prototype.kd=function(a){if(a!=this.g){this.g&&(this.g.unregisterErrorCallback(),this.g.unregisterEndedCallback(),this.g.unregisterLoadCallback());this.g=(this.Cb=a.getState?!1:!0)?new Ue(X,a):a;this.g.registerErrorCallback(this.kc.bind(this));this.g.registerEndedCallback(this.Hb.bind(this));this.g.registerLoadCallback(this.oc.bind(this));var b=this.pb;b.s&&b.s.removeEventListener("resize",b.Zc);var c=null;a.tagName&&"video"==a.tagName.toLowerCase()?c=a:(a=document.getElementsByTagName("video"),
1==a.length&&(c=a[0]));b.s=c;b.s&&b.s.addEventListener("resize",b.Zc)}};W.prototype.setMediaElement=W.prototype.kd;W.prototype.oc=function(){if(this.u)if(E(X,"Metadata loaded"),this.i&&this.i.media&&(this.i.media.duration=this.g.getDurationSec()),this.ga=!0,this.onMetadataLoaded)this.onMetadataLoaded(this.u);else Zf(this)};W.prototype.Nd=function(a){this.Cb&&a.message&&void 0!=a.message.currentTime&&a.message.currentTime!=this.g.getCurrentTimeSec()&&this.g.seek(a.message.currentTime);this.ed()};
W.prototype.kc=function(a){if(this.u)if(B(X,"Load metadata error: "+a),this.onLoadMetadataError)this.onLoadMetadataError(this.u);else Zf(this);else if(this.onError)this.onError(a)};W.prototype.uc=function(a,b){if(this.u){a=a||"LOAD_FAILED";if(this.u.senderId==this.ta){if(this.onLocalRequestError)this.onLocalRequestError({type:a})}else this.ka(this.u.senderId,this.u.message.requestId,a,null,b);Zf(this)}else B(X,"Not sending LOAD error as there is no on going LOAD request")};
W.prototype.sendLoadError=W.prototype.uc;W.prototype.ed=function(a){if(this.u){var b=this.u.message.requestId;this.l(!0,b,a,0!=b);Zf(this)}else B(X,"Not sending status as there is no on going LOAD request")};W.prototype.sendLoadComplete=W.prototype.ed;h=W.prototype;h.Gd=function(){this.Ba("ERROR")};h.Ld=function(){this.u&&""==this.u.senderId&&this.u.message&&0==this.u.message.requestId?this.Ba("ERROR",!0):(this.Ba("ERROR",!1),this.uc("LOAD_FAILED"))};h.Hb=function(){if(this.onEnded)this.onEnded()};
h.Fd=function(){if(n(this.b.a)){var a=-1!=this.Mb?this.Mb:void 0;this.Mb=-1;$f(this,"REPEAT_SINGLE"==this.b.K?0:1,!1,a,void 0,void 0,void 0,"FINISHED")}};h.Rd=function(a,b){this.Ba(a,!0,b)};var $f=function(a,b,c,d,e,f,g,r){c=a.we.bind(a,b,c,d,e,f,g,r);n(a.b.a)&&"QUEUE_ENDED"!=Af(a.b,b,!1)||!yf(a.b)?c():sf(a.b,b).then(c,c)};h=W.prototype;
h.we=function(a,b,c,d,e,f,g){g=g||"INTERRUPTED";if(n(this.b.a)&&"QUEUE_ENDED"!=Af(this.b,a,!1)){var r=Af(this.b,a,!0);E(X,"After "+a+" jump, transition is: "+r);if(a=ag(this,this.b.oa(),void 0,f)){if(this.i&&(this.o=null,this.fa=g,this.qa=this.i,this.i=null,"QUEUE_SHUFFLED"==r&&(e=!0),"INTERRUPTED"==this.fa))this.onAbort();Mf(this,"",a,!1,this.l.bind(this,b,c,d,e))}else if(this.onQueueEnded)this.onQueueEnded(g,c)}else if(this.onQueueEnded)this.onQueueEnded(g,c)};
h.Kd=function(a){A(X,y,"onGetStatus");var b=a.data;A(X,y,"onGetStatus: "+JSON.stringify(b));var c=!0,d=!0;b.options&&(b.options&1&&(c=!1),b.options&1&&(d=!1));this.fd(a.senderId,a.data.requestId,c,null,d)};h.Qd=function(a){A(X,y,"onPlay");this.g.play();this.l(!1,a.data.requestId)};h.Pd=function(a){A(X,y,"onPlayAgain");this.i?(this.g.seek(0),this.g.play(),this.l(!1,a.data.requestId)):this.ra&&(this.ra.type="LOAD",this.ra.autoplay=!0,Ff(this,this.ta,this.ra))};
h.Wd=function(a){a=a.data;A(X,y,"onSeek: "+JSON.stringify(a));var b=n(a.relativeTime)?this.g.getCurrentTimeSec()+a.relativeTime:a.currentTime;Da(b);this.g.seek(b,a.resumeState);"PAUSED"!=this.g.getState()&&(this.ga=!0);this.g.getCurrentTimeSec()<this.g.getDurationSec()?this.l(!1,a.requestId):this.Mb=a.requestId};h.Xd=function(a){a=a.data;A(X,y,"onSetPlaybackRate: "+JSON.stringify(a));this.g.ld?this.qd(this.g.ld(Number(a.playbackRate))):C(X,"setPlaybackRate is not supported");this.l(!1,a.requestId)};
h.qd=function(a){this.Jb=a};W.prototype.updatePlaybackRate=W.prototype.qd;W.prototype.Zd=function(a){this.Ba("CANCELLED",!0,a.data.requestId)};
W.prototype.Ba=function(a,b,c,d){var e=this;b=!n(b)||b;if((d||c)&&!b)throw Error("customData and requestId should only be provided in broadcast mode");this.i?(this.b.clear(),this.g.reset(),this.o=null,a&&(this.fa=a),this.qa=this.i,this.i=null,b&&this.l(!1,c,d,void 0)):E(X,"Nothing to reset, Media is already null");this.ra&&(Uf(this),this.gb=Mc(function(){e.ra=null;e.gb=null},9E5));if(a&&"INTERRUPTED"==a)this.onAbort()};W.prototype.resetMediaElement=W.prototype.Ba;
W.prototype.Od=function(a){this.g.pause();this.l(!1,a.data.requestId)};W.prototype.Yd=function(a){a=a.data;this.g.setVolume(a.volume);this.l(!1,a.requestId)};
W.prototype.Ed=function(a){var b=a.data;If(this.i.media.tracks,b.language)?(a={activeTrackIds:b.activeTrackIds,language:b.language,textTrackStyle:b.textTrackStyle},this.g.editTracksInfo&&(this.o=this.g.editTracksInfo(a)),this.l(b.textTrackStyle?!0:!1,b.requestId)):(B(X,"Invalid track language"),this.ka(a.senderId,b.requestId,"INVALID_REQUEST","LANGUAGE_NOT_SUPPORTED"))};
W.prototype.Dd=function(a){var b=a.data;Jf(this.i.media.tracks,b.language)?(this.g.ae&&(this.o=this.g.ae(b)),this.l(!1,b.requestId)):(B(X,"Invalid audio track language"),this.ka(a.senderId,b.requestId,"INVALID_REQUEST","LANGUAGE_NOT_SUPPORTED"))};
var Pf=function(a){if(2>a.length)return!0;for(var b=0;b<a.length;b++)for(var c=b+1;c<a.length;c++)if(a[b]==a[c])return B(X,"Duplicate itemId: "+a[b]+"at positions:"+b+" "+c),!1;return!0},bg=function(a){for(var b=0;b<a.length;b++){if(!p(a[b].itemId))return B(X,"Invalid itemId at position: "+b),!1;for(var c=b+1;c<a.length;c++){if(!p(a[c].itemId))return B(X,"Invalid itemId at position: "+c),!1;if(a[b].itemId==a[c].itemId)return B(X,"Duplicate itemId: "+a[b].itemId+"at positions:"+b+" "+c),!1}}return!0},
Nf=function(a){for(var b=[],c=0;c<a.length;c++){var d=new jf(a[c].itemId);d.media=a[c].media;d.autoplay=a[c].autoplay;d.startTime=a[c].startTime;d.playbackDuration=a[c].playbackDuration;d.preloadTime=a[c].preloadTime;d.activeTrackIds=a[c].activeTrackIds;d.customData=a[c].customData;b.push(d)}return b},ag=function(a,b,c,d){if(!b)return null;var e=new cg;e.requestId=c||0;e.mediaSessionId=a.ha;e.type="LOAD";e.autoplay=b.autoplay;e.currentTime=n(d)?d:b.startTime;e.activeTrackIds=b.activeTrackIds;e.customData=
b.customData||void 0;e.media=b.media;return e},Wf=function(a,b){if(a.i.media.duration-a.g.getCurrentTimeSec()<=b)return!0;if(null==a.ya)return!1;a.ya=null;if(!a.onCancelPreload)return!1;b=new Z("CANCEL_PRELOAD");b.requestId=0;b.mediaSessionId=a.ha;b=new Y("cancelpreload",b,"");E(X,"Sending cancel preload event: "+JSON.stringify(b));a.onCancelPreload(b)&&a.l(!1);return!1};
W.prototype.Td=function(a){var b=a.data,c=ag(this,b.items?b.items[b.startIndex||0]:null,b.requestId,b.currentTime),d=new vd;d.items=b.items;d.startIndex=b.startIndex||0;d.startTime=b.currentTime;d.repeatMode=b.repeatMode||"REPEAT_OFF";c.queueData=d;c?Mf(this,a.senderId,c,!0):B(X,"Queue Load request is invalid")};
W.prototype.Sd=function(a){a=a.data;E(X,"Queue insert data: "+JSON.stringify(a));var b=!1;n(a.currentItemId)&&(b=xf(this.b,a.currentItemId));n(a.currentItemIndex)&&(b=!0);var c=this.b,d=a.items,e=a.insertBefore,f=a.currentItemIndex;yf(c,"insertItems")||pf(c,d,e,f);b?$f(this,0,!0,a.requestId,a.customData,!0,a.currentTime):this.l(!0,a.requestId,a.customData,!0)};
var Of=function(a,b,c){E(X,"Dispatching MediaManager queueUpdate event");var d=!1;n(a.b.a)?c.items&&!bg(c.items)?d=!0:c.repeatMode&&!Ld(c.repeatMode)&&(B(X,"Invalid repeatMode"),d=!0):(B(X,"Queue does not exist"),d=!0);if(d)return{type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};if(c.items&&0<c.items.length){for(var d=a.b,e=c.items,f=[],g=0;g<e.length;g++)for(var r=0;r<d.a.length;r++)if(e[g].itemId==d.a[r].itemId){f.push(e[g]);break}c.items=Nf(f)}b=new Y("queueupdate",c,b);if(a.onQueueUpdate)a.onQueueUpdate(b);
a.f(b);return null};h=W.prototype;h.Hd=function(a){var b=this,c=a.data;this.b.Ja(c.requestId,c.itemId,c.nextCount,c.prevCount).then(function(c){"NO_CHANGE"==c.changeType?b.W.send(a.senderId,c):b.W.Rb(c)},function(){Rf(b,{type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},a.senderId,c.requestId)})};h.Id=function(a){var b=a.data;this.W.send(a.senderId,qf(this.b,b.requestId,b.itemIds))};h.Jd=function(a){this.W.send(a.senderId,rf(this.b,a.data.requestId))};
h.zc=function(a){var b=a.data;if(this.nb){E(X,"Queue update data: "+JSON.stringify(b));var c=!1;a=!1;p(b.currentItemId)&&(a=xf(this.b,b.currentItemId));p(b.jump)&&(a=!0);b.repeatMode&&(this.b.K=b.repeatMode);if(b.items&&0<b.items.length){for(var c=this.b,d=b.items,e=0;e<d.length;e++)for(var f=0;f<c.a.length;f++)d[e].itemId==c.a[f].itemId&&(c.a[f]=d[e]);c=!0}b.shuffle&&(zf(this.b),a=!0);a?$f(this,b.jump||0,c,b.requestId,b.customData,c,b.currentTime):this.l(c,b.requestId,b.customData,c)}else a=a.senderId,
"__inject__"==a&&this.onQueueUpdate==this.zc?this.ka(a,b.requestId,"INVALID_REQUEST","INVALID_COMMAND"):(E(X,"QUEUE_UPDATE request ignored"),this.l(!1,b.requestId))};
h.Ud=function(a){a=a.data;E(X,"Queue remove data: "+JSON.stringify(a));var b=!1;p(a.currentItemId)&&(b=xf(this.b,a.currentItemId));if(a.itemIds&&0!=a.itemIds.length){if(!b){var b=this.b,c=a.itemIds;if(yf(b,"removeItems"))b=!1;else{for(var d=!1,e=0;e<c.length;e++)for(var f=0;f<b.a.length;f++)if(c[e]==b.a[f].itemId){b.a.splice(f,1);b.j==f?d=!0:b.j>f&&b.j--;break}b.j>=b.a.length&&(b.j=vf(b)?0:-1,uf(b)&&0==b.j&&zf(b));b=d}}b?$f(this,0,!1,a.requestId,a.customData,!0,a.currentTime):this.l(!1,a.requestId,
a.customData,!0)}else B(X,"No itemIds to remove")};
h.Vd=function(a){a=a.data;E(X,"Queue reorder data: "+JSON.stringify(a));var b=!1,c=!1;p(a.currentItemId)&&(c=xf(this.b,a.currentItemId));if(a.itemIds&&0<a.itemIds.length){var b=this.b,d=a.itemIds,e=a.insertBefore;if(!yf(b,"reorderItems")&&d&&0!=d.length){for(var f=b.a[b.j].itemId,g=n(e)?e:-1,e=b.a.length-d.length,r=[],H=-1==g?!0:!1,D=0;D<b.a.length;D++)0<=Fa(d,b.a[D].itemId)?H||b.a[D].itemId!=d[0]||(e=r.length):(r.push(b.a[D]),g==b.a[D].itemId&&(e=r.length-1,H=!0));g=[];for(H=0;H<d.length;H++){a:{for(D=
0;D<b.a.length;D++)if(d[H]==b.a[D].itemId){D=b.a[D];break a}D=null}g.push(D)}qa(Na,r,e,0).apply(null,g);b.a=r;n(f)&&xf(b,f)}b=!0}c?$f(this,0,!1,a.requestId,a.customData,b,a.currentTime):this.l(!1,a.requestId,a.customData,b)};h.addEventListener=function(a,b){I(this.h,a,b)};W.prototype.addEventListener=W.prototype.addEventListener;W.prototype.removeEventListener=function(a,b){J(this.h,a,b)};W.prototype.removeEventListener=W.prototype.removeEventListener;
W.prototype.f=function(a){a.target=this;return dc(this.h,a)};W.prototype.dispatchEvent=function(a){return this.f(a)};W.prototype.dispatchEvent=W.prototype.dispatchEvent;var Sf=function(a){return!!a&&na(a)&&"function"===typeof a.then},X=z("cast.receiver.MediaManager");
W.EventType={LOAD:"load",STOP:"stop",PAUSE:"pause",PLAY:"play",PLAY_AGAIN:"playagain",SEEK:"seek",SET_PLAYBACK_RATE:"setplaybackrate",SET_VOLUME:"setvolume",GET_STATUS:"getstatus",EDIT_TRACKS_INFO:"edittracksinfo",EDIT_AUDIO_TRACKS:"editaudiotracks",QUEUE_LOAD:"queueload",QUEUE_INSERT:"queueinsert",QUEUE_UPDATE:"queueupdate",QUEUE_REMOVE:"queueremove",QUEUE_REORDER:"queuereorder",PRECACHE:"precache",PRELOAD:"preload",CANCEL_PRELOAD:"cancelpreload",FETCH_ITEMS:"fetchitems",GET_ITEMS_INFO:"getitemsinfo",
GET_QUEUE_IDS:"getqueueids"};var Y=function(a,b,c){G.call(this,a);this.data=b;this.senderId=c};k(Y,G);W.Event=Y;var Z=function(a){this.type=a;this.requestId=0;this.customData=this.mediaSessionId=void 0};W.RequestData=Z;var cg=function(){Z.call(this,"LOAD");this.media=new ud;this.autoplay=!1;this.currentTime=0;this.playbackRate=1;this.queueData=this.activeTrackIds=void 0};k(cg,Z);W.LoadRequestData=cg;var Xf=function(a){cg.call(this);this.type="PRELOAD";this.itemId=a};k(Xf,cg);
W.PreloadRequestData=Xf;var dg=function(a){Z.call(this,"PRECACHE");this.data=a};k(dg,Z);W.PrecacheRequestData=dg;var eg=function(){Z.call(this,"SET_VOLUME");this.volume=new Cd};k(eg,Z);W.VolumeRequestData=eg;var fg=function(){Z.call(this,"EDIT_TRACKS_INFO");this.isSuggestedLanguage=this.textTrackStyle=this.language=this.activeTrackIds=void 0};k(fg,Z);W.EditTracksInfoData=fg;var gg=function(){Z.call(this,"EDIT_AUDIO_TRACKS");this.isSuggestedLanguage=this.language=void 0};k(gg,Z);
W.EditAudioTracksData=gg;var hg=function(){Z.call(this,"SEEK");this.resumeState=void 0;this.currentTime=0;this.relativeTime=void 0};k(hg,Z);W.SeekRequestData=hg;var ig=function(){Z.call(this,"SET_PLAYBACK_RATE");this.playbackRate=1};k(ig,Z);W.SetPlaybackRateRequestData=ig;var jg=function(){Z.call(this,"GET_STATUS");this.options=void 0};k(jg,Z);W.GetStatusRequestData=jg;var kg=function(a){Z.call(this,"QUEUE_LOAD");this.repeatMode=void 0;this.items=a;this.currentTime=this.startIndex=void 0};k(kg,Z);
W.QueueLoadRequestData=kg;var Ef=function(a){Z.call(this,"QUEUE_INSERT");this.currentTime=this.currentItemId=this.currentItemIndex=this.insertBefore=void 0;this.items=a};k(Ef,Z);W.QueueInsertRequestData=Ef;var Qf=function(){Z.call(this,"QUEUE_UPDATE");this.shuffle=this.repeatMode=this.items=this.jump=this.currentTime=this.currentItemId=void 0};k(Qf,Z);W.QueueUpdateRequestData=Qf;var Gf=function(a){Z.call(this,"QUEUE_REMOVE");this.currentTime=this.currentItemId=void 0;this.itemIds=a};k(Gf,Z);
W.QueueRemoveRequestData=Gf;var lg=function(a){Z.call(this,"QUEUE_REORDER");this.insertBefore=this.currentTime=this.currentItemId=void 0;this.itemIds=a};k(lg,Z);W.QueueReorderRequestData=lg;W.LoadInfo=function(a,b){this.message=a;this.senderId=b};var mg=function(a,b,c){Z.call(this,"FETCH_ITEMS");this.itemId=a;this.nextCount=b;this.prevCount=c};k(mg,Z);W.FetchItemsRequestData=mg;var ng=function(a){Z.call(this,"GET_ITEMS_INFO");this.itemIds=a};k(ng,Z);W.GetItemsInfoRequestData=ng;var og=function(a){this.xd=a.Ka("urn:x-cast:com.google.cast.debugoverlay","JSON");this.xd.onMessage=this.F.bind(this);this.Y=this.s=this.vb=this.Va=null;this.ia=[];this.ja=[]};og.prototype.F=function(a){E(pg,"DebugOverlay: "+JSON.stringify(a.data));switch(a.data.type){case "SHOW":qg(this);break;case "HIDE":rg(this)}};
var qg=function(a){a.s||a.Y||(a.ia.length=0,a.ja.length=0,a.cd(),a.s||(a.Y=window.setInterval(a.cd.bind(a),1E3)))},rg=function(a){if(a.s||a.Y)a.Va&&(document.body.removeChild(a.Va.parentElement),a.Va=null),a.vb&&(window.clearInterval(a.vb),a.vb=null),a.s&&(J(a.s,"seeking",a.Tc,!1,a),a.s=null),a.Y&&(window.clearInterval(a.Y),a.Y=null)},sg=function(a,b){E(pg,"found active video");a.s=b;b=document.createElement("div");b.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;z-index:9001;-webkit-text-fill-color:black;-webkit-text-stroke-color:red;-webkit-text-stroke-width:1px;padding-left:5vw;padding-top:5vh;margin:0;font-size:24pt";
var c=document.createTextNode("");b.appendChild(c);b.id="__CAST_DEBUG_OVERLAY__";document.body.appendChild(b);a.Va=c;a.Rc();a.vb=window.setInterval(a.Rc.bind(a),1E3);I(a.s,"seeking",a.Tc,!1,a);a.Y&&(window.clearInterval(a.Y),a.Y=null)};
og.prototype.Rc=function(){var a=this.s;if(a&&a.src&&!a.error&&!a.ended&&1<=a.readyState){var b=a.videoWidth,c=a.videoHeight;if(0>=b||0>=c)Fb(pg,"canceling draw because video not initialized");else{var d=0;if(a.paused||a.seeking)Fb(pg,"not calculating fps because paused or seeking");else{var d=a.webkitDecodedFrameCount,a=a.currentTime,e=0;if(0<this.ia.length&&0<this.ja.length){var f=this.ia[0],g=this.ja[0];a>f&&d>g&&(e=(d-g)/(a-f))}this.ia.push(a);this.ja.push(d);5<=this.ia.length&&5<=this.ja.length&&
(this.ia.splice(0,this.ia.length-5),this.ja.splice(0,this.ja.length-5));d=e}b=b+"x"+c+"("+(0<d?Math.round(d).toString():"?")+")";Fb(pg,"video is "+b);this.Va.textContent=b}}else if(Fb(pg,"video is no longer active, restarting search procedure"),this.s||this.Y)rg(this),qg(this)};og.prototype.Tc=function(){E(pg,"onSeeking");this.ia=[this.s.currentTime];this.ja=[this.s.webkitDecodedFrameCount]};
og.prototype.cd=function(){var a=function(b){for(var c=l(b.document.getElementsByTagName("video")),e=c.next();!e.done;e=c.next())if(e=e.value,e.src&&!e.error&&!e.ended&&1<=e.readyState)return e;for(c=0;c<b.frames.length;++c)try{var f=a(b.frames[c]);if(f)return f}catch(g){}return null},b=a(window);b&&sg(this,b)};var pg=z("cast.receiver.DebugOverlay"),Td=function(a){new og(a)};}).call(window);
